import{c as N,b as Kt}from"./index-BXj-mBhB.js";import{r as Yt,a as Zt}from"./index-DuuRCyoB.js";var Nt={},v={},P={},gt={};(function(r){/**
 * Character classes and associated utilities for the 5th edition of XML 1.0.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(r,"__esModule",{value:!0}),r.CHAR=`	
\r -ÌüøÓÄÄ-ÔøΩêÄÄ-Ùèøø`,r.S=` 	\r
`,r.NAME_START_CHAR=":A-Z_a-z√Ä-√ñ√ò-√∂√∏-ÀøÕ∞-ÕΩÕø-·øø‚Äå‚Äç‚Å∞-‚Üè‚∞Ä-‚øØ„ÄÅ-ÌüøÔ§Ä-Ô∑èÔ∑∞-ÔøΩêÄÄ-ÛØøø",r.NAME_CHAR="-"+r.NAME_START_CHAR+".0-9¬∑ÃÄ-ÕØ‚Äø-‚ÅÄ",r.CHAR_RE=new RegExp("^["+r.CHAR+"]$","u"),r.S_RE=new RegExp("^["+r.S+"]+$","u"),r.NAME_START_CHAR_RE=new RegExp("^["+r.NAME_START_CHAR+"]$","u"),r.NAME_CHAR_RE=new RegExp("^["+r.NAME_CHAR+"]$","u"),r.NAME_RE=new RegExp("^["+r.NAME_START_CHAR+"]["+r.NAME_CHAR+"]*$","u"),r.NMTOKEN_RE=new RegExp("^["+r.NAME_CHAR+"]+$","u");var t=9,e=10,i=13,a=32;r.S_LIST=[a,e,i,t];function n(h){return h>=a&&h<=55295||h===e||h===i||h===t||h>=57344&&h<=65533||h>=65536&&h<=1114111}r.isChar=n;function o(h){return h===a||h===e||h===i||h===t}r.isS=o;function l(h){return h>=65&&h<=90||h>=97&&h<=122||h===58||h===95||h===8204||h===8205||h>=192&&h<=214||h>=216&&h<=246||h>=248&&h<=767||h>=880&&h<=893||h>=895&&h<=8191||h>=8304&&h<=8591||h>=11264&&h<=12271||h>=12289&&h<=55295||h>=63744&&h<=64975||h>=65008&&h<=65533||h>=65536&&h<=983039}r.isNameStartChar=l;function u(h){return l(h)||h>=48&&h<=57||h===45||h===46||h===183||h>=768&&h<=879||h>=8255&&h<=8256}r.isNameChar=u})(gt);var At={};(function(r){/**
 * Character classes and associated utilities for the 2nd edition of XML 1.1.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(r,"__esModule",{value:!0}),r.CHAR="-ÌüøÓÄÄ-ÔøΩêÄÄ-Ùèøø",r.RESTRICTED_CHAR="-\b\v\f--¬Ñ¬Ü-¬ü",r.S=` 	\r
`,r.NAME_START_CHAR=":A-Z_a-z√Ä-√ñ√ò-√∂√∏-ÀøÕ∞-ÕΩÕø-·øø‚Äå‚Äç‚Å∞-‚Üè‚∞Ä-‚øØ„ÄÅ-ÌüøÔ§Ä-Ô∑èÔ∑∞-ÔøΩêÄÄ-ÛØøø",r.NAME_CHAR="-"+r.NAME_START_CHAR+".0-9¬∑ÃÄ-ÕØ‚Äø-‚ÅÄ",r.CHAR_RE=new RegExp("^["+r.CHAR+"]$","u"),r.RESTRICTED_CHAR_RE=new RegExp("^["+r.RESTRICTED_CHAR+"]$","u"),r.S_RE=new RegExp("^["+r.S+"]+$","u"),r.NAME_START_CHAR_RE=new RegExp("^["+r.NAME_START_CHAR+"]$","u"),r.NAME_CHAR_RE=new RegExp("^["+r.NAME_CHAR+"]$","u"),r.NAME_RE=new RegExp("^["+r.NAME_START_CHAR+"]["+r.NAME_CHAR+"]*$","u"),r.NMTOKEN_RE=new RegExp("^["+r.NAME_CHAR+"]+$","u");var t=9,e=10,i=13,a=32;r.S_LIST=[a,e,i,t];function n(s){return s>=1&&s<=55295||s>=57344&&s<=65533||s>=65536&&s<=1114111}r.isChar=n;function o(s){return s>=1&&s<=8||s===11||s===12||s>=14&&s<=31||s>=127&&s<=132||s>=134&&s<=159}r.isRestrictedChar=o;function l(s){return s===9||s===10||s===13||s>31&&s<127||s===133||s>159&&s<=55295||s>=57344&&s<=65533||s>=65536&&s<=1114111}r.isCharAndNotRestricted=l;function u(s){return s===a||s===e||s===i||s===t}r.isS=u;function h(s){return s>=65&&s<=90||s>=97&&s<=122||s===58||s===95||s===8204||s===8205||s>=192&&s<=214||s>=216&&s<=246||s>=248&&s<=767||s>=880&&s<=893||s>=895&&s<=8191||s>=8304&&s<=8591||s>=11264&&s<=12271||s>=12289&&s<=55295||s>=63744&&s<=64975||s>=65008&&s<=65533||s>=65536&&s<=983039}r.isNameStartChar=h;function p(s){return h(s)||s>=48&&s<=57||s===45||s===46||s===183||s>=768&&s<=879||s>=8255&&s<=8256}r.isNameChar=p})(At);var Tt={};(function(r){/**
 * Character class utilities for XML NS 1.0 edition 3.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(r,"__esModule",{value:!0}),r.NC_NAME_START_CHAR="A-Z_a-z√Ä-√ñ√ò-√∂√∏-ÀøÕ∞-ÕΩÕø-·øø‚Äå-‚Äç‚Å∞-‚Üè‚∞Ä-‚øØ„ÄÅ-ÌüøÔ§Ä-Ô∑èÔ∑∞-ÔøΩêÄÄ-ÛØøø",r.NC_NAME_CHAR="-"+r.NC_NAME_START_CHAR+".0-9¬∑ÃÄ-ÕØ‚Äø-‚ÅÄ",r.NC_NAME_START_CHAR_RE=new RegExp("^["+r.NC_NAME_START_CHAR+"]$","u"),r.NC_NAME_CHAR_RE=new RegExp("^["+r.NC_NAME_CHAR+"]$","u"),r.NC_NAME_RE=new RegExp("^["+r.NC_NAME_START_CHAR+"]["+r.NC_NAME_CHAR+"]*$","u");function t(i){return i>=65&&i<=90||i===95||i>=97&&i<=122||i>=192&&i<=214||i>=216&&i<=246||i>=248&&i<=767||i>=880&&i<=893||i>=895&&i<=8191||i>=8204&&i<=8205||i>=8304&&i<=8591||i>=11264&&i<=12271||i>=12289&&i<=55295||i>=63744&&i<=64975||i>=65008&&i<=65533||i>=65536&&i<=983039}r.isNCNameStartChar=t;function e(i){return t(i)||i===45||i===46||i>=48&&i<=57||i===183||i>=768&&i<=879||i>=8255&&i<=8256}r.isNCNameChar=e})(Tt);Object.defineProperty(P,"__esModule",{value:!0});P.SaxesParser=P.EVENTS=void 0;const y=gt,Jt=At,nt=Tt;var D=y.isS,te=y.isChar,$=y.isNameStartChar,ht=y.isNameChar,Rt=y.S_LIST,ee=y.NAME_RE,ie=Jt.isChar,se=nt.isNCNameStartChar,ae=nt.isNCNameChar,re=nt.NC_NAME_RE;const U="http://www.w3.org/XML/1998/namespace",I="http://www.w3.org/2000/xmlns/",ne={__proto__:null,xml:U,xmlns:I},oe={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},F=-1,_=-2,lt=0,he=1,G=2,le=3,T=4,ue=5,ce=6,de=7,Q=8,fe=9,Fe=10,pe=11,me=12,E=13,k=14,z=15,xe=16,K=17,Ee=18,De=19,Y=20,Ce=21,_e=22,be=23,ut=24,Z=25,B=26,ct=27,Se=28,Ne=29,dt=30,ge=31,Ae=32,g=33,Te=34,J=35,M=36,tt=37,Re=38,ft=39,Ft=40,we=41,pt=42,Ie=43,ve=44,et=9,C=10,it=13,mt=32,xt=33,wt=34,O=38,It=39,H=45,j=47,Pe=59,S=60,R=61,m=62,x=63,vt=91,w=93,Et=133,Dt=8232,V=r=>r===wt||r===It,Pt=[wt,It],ye=[...Pt,vt,m],$e=[...Pt,S,w],Me=[R,x,...Rt],Oe=[...Rt,m,O,S];function rt(r,t,e){switch(t){case"xml":e!==U&&r.fail(`xml prefix must be bound to ${U}.`);break;case"xmlns":e!==I&&r.fail(`xmlns prefix must be bound to ${I}.`);break}switch(e){case I:r.fail(t===""?`the default namespace may not be set to ${e}.`:`may not assign a prefix (even "xmlns") to the URI ${I}.`);break;case U:switch(t){case"xml":break;case"":r.fail(`the default namespace may not be set to ${e}.`);break;default:r.fail("may not assign the xml namespace to another prefix.")}break}}function Le(r,t){for(const e of Object.keys(t))rt(r,e,t[e])}const ke=r=>re.test(r),Be=r=>ee.test(r),A=0,Ct=1,st=2;P.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const _t={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};class He{get closed(){return this._closed}constructor(t){this.opt=t??{},this.fragmentOpt=!!this.opt.fragment;const e=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,e){this.nameStartCheck=se,this.nameCheck=ae,this.isName=ke,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},ne);const i=this.opt.additionalNamespaces;i!=null&&(Le(this,i),Object.assign(this.ns,i))}else this.nameStartCheck=$,this.nameCheck=ht,this.isName=Be,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}_init(){var t;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=A,this.attribList=[];const{fragmentOpt:e}=this;this.state=e?E:lt,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=e,this.xmlDeclPossible=!e,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:i}=this.opt;if(i===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");i="1.0"}this.setXMLVersion(i),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(oe),(t=this.readyHandler)===null||t===void 0||t.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(t,e){this[_t[t]]=e}off(t){this[_t[t]]=void 0}makeError(t){var e;let i=(e=this.fileName)!==null&&e!==void 0?e:"";return this.trackPosition&&(i.length>0&&(i+=":"),i+=`${this.line}:${this.column}`),i.length>0&&(i+=": "),new Error(i+t)}fail(t){const e=this.makeError(t),i=this.errorHandler;if(i===void 0)throw e;return i(e),this}write(t){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let e=!1;t===null?(e=!0,t=""):typeof t=="object"&&(t=t.toString()),this.carriedFromPrevious!==void 0&&(t=`${this.carriedFromPrevious}${t}`,this.carriedFromPrevious=void 0);let i=t.length;const a=t.charCodeAt(i-1);!e&&(a===it||a>=55296&&a<=56319)&&(this.carriedFromPrevious=t[i-1],i--,t=t.slice(0,i));const{stateTable:n}=this;for(this.chunk=t,this.i=0;this.i<i;)n[this.state].call(this);return this.chunkPosition+=i,e?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:t,i:e}=this;if(this.prevI=e,this.i=e+1,e>=t.length)return F;const i=t.charCodeAt(e);if(this.column++,i<55296){if(i>=mt||i===et)return i;switch(i){case C:return this.line++,this.column=0,this.positionAtNewLine=this.position,C;case it:return t.charCodeAt(e+1)===C&&(this.i=e+2),this.line++,this.column=0,this.positionAtNewLine=this.position,_;default:return this.fail("disallowed character."),i}}if(i>56319)return i>=57344&&i<=65533||this.fail("disallowed character."),i;const a=65536+(i-55296)*1024+(t.charCodeAt(e+1)-56320);return this.i=e+2,a>1114111&&this.fail("disallowed character."),a}getCode11(){const{chunk:t,i:e}=this;if(this.prevI=e,this.i=e+1,e>=t.length)return F;const i=t.charCodeAt(e);if(this.column++,i<55296){if(i>31&&i<127||i>159&&i!==Dt||i===et)return i;switch(i){case C:return this.line++,this.column=0,this.positionAtNewLine=this.position,C;case it:{const n=t.charCodeAt(e+1);(n===C||n===Et)&&(this.i=e+2)}case Et:case Dt:return this.line++,this.column=0,this.positionAtNewLine=this.position,_;default:return this.fail("disallowed character."),i}}if(i>56319)return i>=57344&&i<=65533||this.fail("disallowed character."),i;const a=65536+(i-55296)*1024+(t.charCodeAt(e+1)-56320);return this.i=e+2,a>1114111&&this.fail("disallowed character."),a}getCodeNorm(){const t=this.getCode();return t===_?C:t}unget(){this.i=this.prevI,this.column--}captureTo(t){let{i:e}=this;const{chunk:i}=this;for(;;){const a=this.getCode(),n=a===_,o=n?C:a;if(o===F||t.includes(o))return this.text+=i.slice(e,this.prevI),o;n&&(this.text+=`${i.slice(e,this.prevI)}
`,e=this.i)}}captureToChar(t){let{i:e}=this;const{chunk:i}=this;for(;;){let a=this.getCode();switch(a){case _:this.text+=`${i.slice(e,this.prevI)}
`,e=this.i,a=C;break;case F:return this.text+=i.slice(e),!1}if(a===t)return this.text+=i.slice(e,this.prevI),!0}}captureNameChars(){const{chunk:t,i:e}=this;for(;;){const i=this.getCode();if(i===F)return this.name+=t.slice(e),F;if(!ht(i))return this.name+=t.slice(e,this.prevI),i===_?C:i}}skipSpaces(){for(;;){const t=this.getCodeNorm();if(t===F||!D(t))return t}}setXMLVersion(t){this.currentXMLVersion=t,t==="1.0"?(this.isChar=te,this.getCode=this.getCode10):(this.isChar=ie,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=he}sBeginWhitespace(){const t=this.i,e=this.skipSpaces();switch(this.prevI!==t&&(this.xmlDeclPossible=!1),e){case S:if(this.state=z,this.text.length!==0)throw new Error("no-empty text at start");break;case F:break;default:this.unget(),this.state=E,this.xmlDeclPossible=!1}}sDoctype(){var t;const e=this.captureTo(ye);switch(e){case m:{(t=this.doctypeHandler)===null||t===void 0||t.call(this,this.text),this.text="",this.state=E,this.doctype=!0;break}case F:break;default:this.text+=String.fromCodePoint(e),e===vt?this.state=T:V(e)&&(this.state=le,this.q=e)}}sDoctypeQuote(){const t=this.q;this.captureToChar(t)&&(this.text+=String.fromCodePoint(t),this.q=null,this.state=G)}sDTD(){const t=this.captureTo($e);t!==F&&(this.text+=String.fromCodePoint(t),t===w?this.state=G:t===S?this.state=ce:V(t)&&(this.state=ue,this.q=t))}sDTDQuoted(){const t=this.q;this.captureToChar(t)&&(this.text+=String.fromCodePoint(t),this.state=T,this.q=null)}sDTDOpenWaka(){const t=this.getCodeNorm();switch(this.text+=String.fromCodePoint(t),t){case xt:this.state=de,this.openWakaBang="";break;case x:this.state=pe;break;default:this.state=T}}sDTDOpenWakaBang(){const t=String.fromCodePoint(this.getCodeNorm()),e=this.openWakaBang+=t;this.text+=t,e!=="-"&&(this.state=e==="--"?Q:T,this.openWakaBang="")}sDTDComment(){this.captureToChar(H)&&(this.text+="-",this.state=fe)}sDTDCommentEnding(){const t=this.getCodeNorm();this.text+=String.fromCodePoint(t),this.state=t===H?Fe:Q}sDTDCommentEnded(){const t=this.getCodeNorm();this.text+=String.fromCodePoint(t),t===m?this.state=T:(this.fail("malformed comment."),this.state=Q)}sDTDPI(){this.captureToChar(x)&&(this.text+="?",this.state=me)}sDTDPIEnding(){const t=this.getCodeNorm();this.text+=String.fromCodePoint(t),t===m&&(this.state=T)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:t}=this;const{chunk:e}=this;t:for(;;)switch(this.getCode()){case _:this.entity+=`${e.slice(t,this.prevI)}
`,t=this.i;break;case Pe:{const{entityReturnState:i}=this,a=this.entity+e.slice(t,this.prevI);this.state=i;let n;a===""?(this.fail("empty entity name."),n="&;"):(n=this.parseEntity(a),this.entity=""),(i!==E||this.textHandler!==void 0)&&(this.text+=n);break t}case F:this.entity+=e.slice(t);break t}}sOpenWaka(){const t=this.getCode();if($(t))this.state=Te,this.unget(),this.xmlDeclPossible=!1;else switch(t){case j:this.state=Ie,this.xmlDeclPossible=!1;break;case xt:this.state=xe,this.openWakaBang="",this.xmlDeclPossible=!1;break;case x:this.state=be;break;default:this.fail("disallowed character in tag name"),this.state=E,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":!this.sawRoot&&!this.reportedTextBeforeRoot&&(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=Y,this.openWakaBang="";break;case"--":this.state=K,this.openWakaBang="";break;case"DOCTYPE":this.state=G,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(H)&&(this.state=Ee)}sCommentEnding(){var t;const e=this.getCodeNorm();e===H?(this.state=De,(t=this.commentHandler)===null||t===void 0||t.call(this,this.text),this.text=""):(this.text+=`-${String.fromCodePoint(e)}`,this.state=K)}sCommentEnded(){const t=this.getCodeNorm();t!==m?(this.fail("malformed comment."),this.text+=`--${String.fromCodePoint(t)}`,this.state=K):this.state=E}sCData(){this.captureToChar(w)&&(this.state=Ce)}sCDataEnding(){const t=this.getCodeNorm();t===w?this.state=_e:(this.text+=`]${String.fromCodePoint(t)}`,this.state=Y)}sCDataEnding2(){var t;const e=this.getCodeNorm();switch(e){case m:{(t=this.cdataHandler)===null||t===void 0||t.call(this,this.text),this.text="",this.state=E;break}case w:this.text+="]";break;default:this.text+=`]]${String.fromCodePoint(e)}`,this.state=Y}}sPIFirstChar(){const t=this.getCodeNorm();this.nameStartCheck(t)?(this.piTarget+=String.fromCodePoint(t),this.state=ut):t===x||D(t)?(this.fail("processing instruction without a target."),this.state=t===x?B:Z):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(t),this.state=ut)}sPIRest(){const{chunk:t,i:e}=this;for(;;){const i=this.getCodeNorm();if(i===F){this.piTarget+=t.slice(e);return}if(!this.nameCheck(i)){this.piTarget+=t.slice(e,this.prevI);const a=i===x;a||D(i)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=a?g:ct):this.state=a?B:Z:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(i));break}}}sPIBody(){if(this.text.length===0){const t=this.getCodeNorm();t===x?this.state=B:D(t)||(this.text=String.fromCodePoint(t))}else this.captureToChar(x)&&(this.state=B)}sPIEnding(){var t;const e=this.getCodeNorm();if(e===m){const{piTarget:i}=this;i.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(t=this.piHandler)===null||t===void 0||t.call(this,{target:i,body:this.text}),this.piTarget=this.text="",this.state=E}else e===x?this.text+="?":(this.text+=`?${String.fromCodePoint(e)}`,this.state=Z);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const t=this.skipSpaces();if(t===x){this.state=g;return}t!==F&&(this.state=Se,this.name=String.fromCodePoint(t))}sXMLDeclName(){const t=this.captureTo(Me);if(t===x){this.state=g,this.name+=this.text,this.text="",this.fail("XML declaration is incomplete.");return}if(D(t)||t===R){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail(`expected one of ${this.xmlDeclExpects.join(", ")}`)}this.state=t===R?dt:Ne}}sXMLDeclEq(){const t=this.getCodeNorm();if(t===x){this.state=g,this.fail("XML declaration is incomplete.");return}D(t)||(t!==R&&this.fail("value required."),this.state=dt)}sXMLDeclValueStart(){const t=this.getCodeNorm();if(t===x){this.state=g,this.fail("XML declaration is incomplete.");return}D(t)||(V(t)?this.q=t:(this.fail("value must be quoted."),this.q=mt),this.state=ge)}sXMLDeclValue(){const t=this.captureTo([this.q,x]);if(t===x){this.state=g,this.text="",this.fail("XML declaration is incomplete.");return}if(t===F)return;const e=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const i=e;this.xmlDecl.version=i,/^1\.[0-9]+$/.test(i)?this.opt.forceXMLVersion||this.setXMLVersion(i):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(e)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=e;break;case"standalone":e!=="yes"&&e!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=e;break}this.name="",this.state=Ae}sXMLDeclSeparator(){const t=this.getCodeNorm();if(t===x){this.state=g;return}D(t)||(this.fail("whitespace required."),this.unget()),this.state=ct}sXMLDeclEnding(){var t;this.getCodeNorm()===m?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(t=this.xmldeclHandler)===null||t===void 0||t.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=E):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var t;const e=this.captureNameChars();if(e===F)return;const i=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=i.ns=Object.create(null)),(t=this.openTagStartHandler)===null||t===void 0||t.call(this,i),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),e){case m:this.openTag();break;case j:this.state=J;break;default:D(e)||this.fail("disallowed character in tag name."),this.state=M}}sOpenTagSlash(){this.getCode()===m?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=M)}sAttrib(){const t=this.skipSpaces();t!==F&&($(t)?(this.unget(),this.state=tt):t===m?this.openTag():t===j?this.state=J:this.fail("disallowed character in attribute name."))}sAttribName(){const t=this.captureNameChars();t===R?this.state=ft:D(t)?this.state=Re:t===m?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):t!==F&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const t=this.skipSpaces();switch(t){case F:return;case R:this.state=ft;break;default:this.fail("attribute without value."),this.text="",this.name="",t===m?this.openTag():$(t)?(this.unget(),this.state=tt):(this.fail("disallowed character in attribute name."),this.state=M)}}sAttribValue(){const t=this.getCodeNorm();V(t)?(this.q=t,this.state=Ft):D(t)||(this.fail("unquoted attribute value."),this.state=pt,this.unget())}sAttribValueQuoted(){const{q:t,chunk:e}=this;let{i}=this;for(;;)switch(this.getCode()){case t:this.pushAttrib(this.name,this.text+e.slice(i,this.prevI)),this.name=this.text="",this.q=null,this.state=we;return;case O:this.text+=e.slice(i,this.prevI),this.state=k,this.entityReturnState=Ft;return;case C:case _:case et:this.text+=`${e.slice(i,this.prevI)} `,i=this.i;break;case S:this.text+=e.slice(i,this.prevI),this.fail("disallowed character.");return;case F:this.text+=e.slice(i);return}}sAttribValueClosed(){const t=this.getCodeNorm();D(t)?this.state=M:t===m?this.openTag():t===j?this.state=J:$(t)?(this.fail("no whitespace between attributes."),this.unget(),this.state=tt):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const t=this.captureTo(Oe);switch(t){case O:this.state=k,this.entityReturnState=pt;break;case S:this.fail("disallowed character.");break;case F:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",t===m?this.openTag():this.state=M}}sCloseTag(){const t=this.captureNameChars();t===m?this.closeTag():D(t)?this.state=ve:t!==F&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case m:this.closeTag();break;case F:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:t,forbiddenState:e}=this;const{chunk:i,textHandler:a}=this;t:for(;;)switch(this.getCode()){case S:{if(this.state=z,a!==void 0){const{text:n}=this,o=i.slice(t,this.prevI);n.length!==0?(a(n+o),this.text=""):o.length!==0&&a(o)}e=A;break t}case O:this.state=k,this.entityReturnState=E,a!==void 0&&(this.text+=i.slice(t,this.prevI)),e=A;break t;case w:switch(e){case A:e=Ct;break;case Ct:e=st;break;case st:break;default:throw new Error("impossible state")}break;case m:e===st&&this.fail('the string "]]>" is disallowed in char data.'),e=A;break;case _:a!==void 0&&(this.text+=`${i.slice(t,this.prevI)}
`),t=this.i,e=A;break;case F:a!==void 0&&(this.text+=i.slice(t));break t;default:e=A}this.forbiddenState=e}handleTextOutsideRoot(){let{i:t}=this;const{chunk:e,textHandler:i}=this;let a=!1;t:for(;;){const n=this.getCode();switch(n){case S:{if(this.state=z,i!==void 0){const{text:o}=this,l=e.slice(t,this.prevI);o.length!==0?(i(o+l),this.text=""):l.length!==0&&i(l)}break t}case O:this.state=k,this.entityReturnState=E,i!==void 0&&(this.text+=e.slice(t,this.prevI)),a=!0;break t;case _:i!==void 0&&(this.text+=`${e.slice(t,this.prevI)}
`),t=this.i;break;case F:i!==void 0&&(this.text+=e.slice(t));break t;default:D(n)||(a=!0)}}a&&(!this.sawRoot&&!this.reportedTextBeforeRoot&&(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(t,e){var i;const{prefix:a,local:n}=this.qname(t),o={name:t,prefix:a,local:n,value:e};if(this.attribList.push(o),(i=this.attributeHandler)===null||i===void 0||i.call(this,o),a==="xmlns"){const l=e.trim();this.currentXMLVersion==="1.0"&&l===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[n]=l,rt(this,n,l)}else if(t==="xmlns"){const l=e.trim();this.topNS[""]=l,rt(this,"",l)}}pushAttribPlain(t,e){var i;const a={name:t,value:e};this.attribList.push(a),(i=this.attributeHandler)===null||i===void 0||i.call(this,a)}end(){var t,e;this.sawRoot||this.fail("document must contain a root element.");const{tags:i}=this;for(;i.length>0;){const n=i.pop();this.fail(`unclosed tag: ${n.name}`)}this.state!==lt&&this.state!==E&&this.fail("unexpected end.");const{text:a}=this;return a.length!==0&&((t=this.textHandler)===null||t===void 0||t.call(this,a),this.text=""),this._closed=!0,(e=this.endHandler)===null||e===void 0||e.call(this),this._init(),this}resolve(t){var e,i;let a=this.topNS[t];if(a!==void 0)return a;const{tags:n}=this;for(let o=n.length-1;o>=0;o--)if(a=n[o].ns[t],a!==void 0)return a;return a=this.ns[t],a!==void 0?a:(i=(e=this.opt).resolvePrefix)===null||i===void 0?void 0:i.call(e,t)}qname(t){const e=t.indexOf(":");if(e===-1)return{prefix:"",local:t};const i=t.slice(e+1),a=t.slice(0,e);return(a===""||i===""||i.includes(":"))&&this.fail(`malformed name: ${t}.`),{prefix:a,local:i}}processAttribsNS(){var t;const{attribList:e}=this,i=this.tag;{const{prefix:o,local:l}=this.qname(i.name);i.prefix=o,i.local=l;const u=i.uri=(t=this.resolve(o))!==null&&t!==void 0?t:"";o!==""&&(o==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),u===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(o)}.`),i.uri=o))}if(e.length===0)return;const{attributes:a}=i,n=new Set;for(const o of e){const{name:l,prefix:u,local:h}=o;let p,s;u===""?(p=l==="xmlns"?I:"",s=l):(p=this.resolve(u),p===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(u)}.`),p=u),s=`{${p}}${h}`),n.has(s)&&this.fail(`duplicate attribute: ${s}.`),n.add(s),o.uri=p,a[l]=o}this.attribList=[]}processAttribsPlain(){const{attribList:t}=this,e=this.tag.attributes;for(const{name:i,value:a}of t)e[i]!==void 0&&this.fail(`duplicate attribute: ${i}.`),e[i]=a;this.attribList=[]}openTag(){var t;this.processAttribs();const{tags:e}=this,i=this.tag;i.isSelfClosing=!1,(t=this.openTagHandler)===null||t===void 0||t.call(this,i),e.push(i),this.state=E,this.name=""}openSelfClosingTag(){var t,e,i;this.processAttribs();const{tags:a}=this,n=this.tag;n.isSelfClosing=!0,(t=this.openTagHandler)===null||t===void 0||t.call(this,n),(e=this.closeTagHandler)===null||e===void 0||e.call(this,n),(this.tag=(i=a[a.length-1])!==null&&i!==void 0?i:null)===null&&(this.closedRoot=!0),this.state=E,this.name=""}closeTag(){const{tags:t,name:e}=this;if(this.state=E,this.name="",e===""){this.fail("weird empty close tag."),this.text+="</>";return}const i=this.closeTagHandler;let a=t.length;for(;a-- >0;){const n=this.tag=t.pop();if(this.topNS=n.ns,i==null||i(n),n.name===e)break;this.fail("unexpected close tag.")}a===0?this.closedRoot=!0:a<0&&(this.fail(`unmatched closing tag: ${e}.`),this.text+=`</${e}>`)}parseEntity(t){if(t[0]!=="#"){const i=this.ENTITIES[t];return i!==void 0?i:(this.fail(this.isName(t)?"undefined entity.":"disallowed character in entity name."),`&${t};`)}let e=NaN;return t[1]==="x"&&/^#x[0-9a-f]+$/i.test(t)?e=parseInt(t.slice(2),16):/^#[0-9]+$/.test(t)&&(e=parseInt(t.slice(1),10)),this.isChar(e)?String.fromCodePoint(e):(this.fail("malformed character entity."),`&${t};`)}}P.SaxesParser=He;var X={};Object.defineProperty(X,"__esModule",{value:!0});X.ParseError=void 0;class je extends Error{constructor(t,e){const i=t.saxParser;super(t.trackPosition?`Line ${i.line} column ${i.column+1}: ${e}`:e)}}X.ParseError=je;var yt={},$t={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.validateIri=r.IriValidationStrategy=void 0;function t(){const l="[!$&'()*+,;=]",u="%[a-fA-F0-9]{2}",h="([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",p=`${h}\\.${h}\\.${h}\\.${h}`,s="[a-fA-F0-9]{1,4}",f=`(${s}:${s}|${p})`,d=`((${s}:){6}${f}|::(${s}:){5}${f}|(${s})?::(${s}:){4}${f}|((${s}:){0,1}${s})?::(${s}:){3}${f}|((${s}:){0,2}${s})?::(${s}:){2}${f}|((${s}:){0,3}${s})?::${s}:${f}|((${s}:){0,4}${s})?::${f}|((${s}:){0,5}${s})?::${s}|((${s}:){0,6}${s})?::)`,Mt=`v[a-fA-F0-9]+\\.(${l}|${l}|":)+`,Ot=`\\[(${d}|${Mt})\\]`,Lt="[0-9]*",kt="[a-zA-Z][a-zA-Z0-9+\\-.]*",Bt="[ÓÄÄ-Ô£øÛ∞ÄÄ-ÛøøΩÙÄÄÄ-ÙèøΩ]",W="[a-zA-Z0-9\\-._~¬†-ÌüøÔ§Ä-Ô∑èÔ∑∞-ÔøØêÄÄ-üøΩ†ÄÄ-ØøΩ∞ÄÄ-øøΩÒÄÄÄ-ÒèøΩÒêÄÄ-ÒüøΩÒ†ÄÄ-ÒØøΩÒ∞ÄÄ-ÒøøΩÚÄÄÄ-ÚèøΩÚêÄÄ-ÚüøΩÚ†ÄÄ-ÚØøΩÚ∞ÄÄ-ÚøøΩÛÄÄÄ-ÛèøΩÛêÄÄ-ÛüøΩÛ°ÄÄ-ÛØøΩ]",L=`(${W}|${u}|${l}|[:@])*`,Ht=`(${L}|[\\/?])*`,jt=`(${L}|${Bt}|[\\/?])*`,ot=`(${L})+`,q=`(${L})*`,Vt="",Ut=`${ot}(\\/${q})*`,Xt=`\\/(${ot}(\\/${q})*)?`,Wt=`(\\/${q})*`,qt=`(${W}|${u}|${l})*`,Gt=`(${Ot}|${p}|${qt})`,Qt=`(\\/\\/${`(${`(${W}|${u}|${l}|:)*`}@)?${Gt}(:${Lt})?`}${Wt}|${Xt}|${Ut}|${Vt})`,zt=`^${kt}:${Qt}(\\?${jt})?(#${Ht})?$`;return new RegExp(zt,"u")}const e=t(),i=/^[A-Za-z][\d+-.A-Za-z]*:[^\u0000-\u0020"<>\\^`{|}]*$/u;var a;(function(o){o.Strict="strict",o.Pragmatic="pragmatic",o.None="none"})(a=r.IriValidationStrategy||(r.IriValidationStrategy={}));function n(o,l=a.Strict){switch(l){case a.Strict:return e.test(o)?void 0:new Error(`Invalid IRI according to RFC 3987: '${o}'`);case a.Pragmatic:return i.test(o)?void 0:new Error(`Invalid IRI according to RDF Turtle: '${o}'`);case a.None:return;default:return new Error(`Not supported validation strategy "${l}"`)}}r.validateIri=n})($t);(function(r){var t=N&&N.__createBinding||(Object.create?function(i,a,n,o){o===void 0&&(o=n);var l=Object.getOwnPropertyDescriptor(a,n);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[n]}}),Object.defineProperty(i,o,l)}:function(i,a,n,o){o===void 0&&(o=n),i[o]=a[n]}),e=N&&N.__exportStar||function(i,a){for(var n in i)n!=="default"&&!Object.prototype.hasOwnProperty.call(a,n)&&t(a,i,n)};Object.defineProperty(r,"__esModule",{value:!0}),e($t,r)})(yt);Object.defineProperty(v,"__esModule",{value:!0});v.ParseType=v.RdfXmlParser=void 0;const bt=Yt,Ve=P,St=Kt,Ue=X,Xe=Zt,at=yt;class c extends St.Transform{constructor(t){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},t&&(Object.assign(this,t),this.options=t),this.dataFactory||(this.dataFactory=new Xe.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.validateUri!==!1&&(this.validateUri=!0),this.iriValidationStrategy||(this.iriValidationStrategy=this.validateUri?at.IriValidationStrategy.Pragmatic:at.IriValidationStrategy.None),this.saxParser=new Ve.SaxesParser({xmlns:!0,position:this.trackPosition}),this.attachSaxListeners()}import(t){const e=new St.PassThrough({readableObjectMode:!0});t.on("error",a=>i.emit("error",a)),t.on("data",a=>e.push(a)),t.on("end",()=>e.push(null));const i=e.pipe(new c(this.options));return i}_transform(t,e,i){try{this.saxParser.write(t)}catch(a){return i(a)}i()}newParseError(t){return new Ue.ParseError(this,t)}valueToUri(t,e){return this.uriToNamedNode((0,bt.resolve)(t,e.baseIRI))}uriToNamedNode(t){const e=(0,at.validateIri)(t,this.iriValidationStrategy);if(e instanceof Error)throw this.newParseError(e.message);return this.dataFactory.namedNode(t)}validateNcname(t){if(!c.NCNAME_MATCHER.test(t))throw this.newParseError(`Not a valid NCName: ${t}`)}attachSaxListeners(){this.saxParser.on("error",t=>this.emit("error",t)),this.saxParser.on("opentag",this.onTag.bind(this)),this.saxParser.on("text",this.onText.bind(this)),this.saxParser.on("cdata",this.onText.bind(this)),this.saxParser.on("closetag",this.onCloseTag.bind(this)),this.saxParser.on("doctype",this.onDoctype.bind(this))}onTag(t){const e=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let i=b.RESOURCE;if(e&&(e.hadChildren=!0,i=e.childrenParseType),e&&e.childrenStringTags){const n=t.name;let o="";for(const p in t.attributes)o+=` ${p}="${t.attributes[p].value}"`;const u=`<${`${n}${o}`}>`;e.childrenStringTags.push(u);const h={childrenStringTags:e.childrenStringTags};h.childrenStringEmitClosingTag=`</${n}>`,this.activeTagStack.push(h);return}const a={};e?(a.language=e.language,a.baseIRI=e.baseIRI):a.baseIRI=this.baseIRI,this.activeTagStack.push(a),i===b.RESOURCE?this.onTagResource(t,a,e,!e):this.onTagProperty(t,a,e)}onTagResource(t,e,i,a){e.childrenParseType=b.PROPERTY;let n=!0;if(t.uri===c.RDF){if(!a&&c.FORBIDDEN_NODE_ELEMENTS.indexOf(t.local)>=0)throw this.newParseError(`Illegal node element name: ${t.local}`);switch(t.local){case"RDF":e.childrenParseType=b.RESOURCE;case"Description":n=!1}}const o=[],l=[];let u=null,h=!1,p=!1,s=null;for(const f in t.attributes){const d=t.attributes[f];if(i&&d.uri===c.RDF)switch(d.local){case"about":if(u)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${d.value} and ${u} where found.`);u=d.value;continue;case"ID":if(u)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${d.value} and ${u} where found.`);this.validateNcname(d.value),u="#"+d.value,h=!0;continue;case"nodeID":if(u)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${d.value} and ${u} where found.`);this.validateNcname(d.value),u=d.value,p=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":s=d.value;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(d.uri===c.XML){if(d.local==="lang"){e.language=d.value===""?null:d.value.toLowerCase();continue}else if(d.local==="base"){e.baseIRI=(0,bt.resolve)(d.value,e.baseIRI);continue}}d.prefix!=="xml"&&d.prefix!=="xmlns"&&(d.prefix!==""||d.local!=="xmlns")&&d.uri&&(o.push(this.uriToNamedNode(d.uri+d.local)),l.push(d.value))}if(u!==null&&(e.subject=p?this.dataFactory.blankNode(u):this.valueToUri(u,e),h&&this.claimNodeId(e.subject)),e.subject||(e.subject=this.dataFactory.blankNode()),n){const f=this.uriToNamedNode(t.uri+t.local);this.emitTriple(e.subject,this.dataFactory.namedNode(c.RDF+"type"),f,i?i.reifiedStatementId:null)}if(i){if(i.predicate)if(i.childrenCollectionSubject){const f=this.dataFactory.blankNode();this.emitTriple(i.childrenCollectionSubject,i.childrenCollectionPredicate,f,i.reifiedStatementId),this.emitTriple(f,this.dataFactory.namedNode(c.RDF+"first"),e.subject,e.reifiedStatementId),i.childrenCollectionSubject=f,i.childrenCollectionPredicate=this.dataFactory.namedNode(c.RDF+"rest")}else{this.emitTriple(i.subject,i.predicate,e.subject,i.reifiedStatementId);for(let f=0;f<i.predicateSubPredicates.length;f++)this.emitTriple(e.subject,i.predicateSubPredicates[f],i.predicateSubObjects[f],null);i.predicateSubPredicates=[],i.predicateSubObjects=[],i.predicateEmitted=!0}for(let f=0;f<o.length;f++){const d=this.dataFactory.literal(l[f],e.datatype||e.language);this.emitTriple(e.subject,o[f],d,i.reifiedStatementId)}s&&this.emitTriple(e.subject,this.dataFactory.namedNode(c.RDF+"type"),this.uriToNamedNode(s),null)}}onTagProperty(t,e,i){if(e.childrenParseType=b.RESOURCE,e.subject=i.subject,t.uri===c.RDF&&t.local==="li"?(i.listItemCounter||(i.listItemCounter=1),e.predicate=this.uriToNamedNode(t.uri+"_"+i.listItemCounter++)):e.predicate=this.uriToNamedNode(t.uri+t.local),t.uri===c.RDF&&c.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(t.local)>=0)throw this.newParseError(`Illegal property element name: ${t.local}`);e.predicateSubPredicates=[],e.predicateSubObjects=[];let a=!1,n=!1,o=null,l=!0;const u=[],h=[];for(const p in t.attributes){const s=t.attributes[p];if(s.uri===c.RDF)switch(s.local){case"resource":if(o)throw this.newParseError(`Found both rdf:resource (${s.value}) and rdf:nodeID (${o}).`);if(a)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${s.value})`);e.hadChildren=!0,o=s.value,l=!1;continue;case"datatype":if(n)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${s.value}).`);if(a)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${s.value})`);e.datatype=this.valueToUri(s.value,e);continue;case"nodeID":if(n)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${s.value}).`);if(e.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${s.value}).`);if(a)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${s.value})`);this.validateNcname(s.value),e.hadChildren=!0,o=s.value,l=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(n)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(e.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${e.datatype.value})`);if(o)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${o})`);if(s.value==="Resource"){a=!0,e.childrenParseType=b.PROPERTY;const f=this.dataFactory.blankNode();this.emitTriple(e.subject,e.predicate,f,e.reifiedStatementId),e.subject=f,e.predicate=null}else s.value==="Collection"?(a=!0,e.hadChildren=!0,e.childrenCollectionSubject=e.subject,e.childrenCollectionPredicate=e.predicate,l=!1):s.value==="Literal"&&(a=!0,e.childrenTagsToString=!0,e.childrenStringTags=[]);continue;case"ID":this.validateNcname(s.value),e.reifiedStatementId=this.valueToUri("#"+s.value,e),this.claimNodeId(e.reifiedStatementId);continue}else if(s.uri===c.XML&&s.local==="lang"){e.language=s.value===""?null:s.value.toLowerCase();continue}if(s.prefix!=="xml"&&s.prefix!=="xmlns"&&(s.prefix!==""||s.local!=="xmlns")&&s.uri){if(a||e.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${s.value}`);e.hadChildren=!0,n=!0,u.push(this.uriToNamedNode(s.uri+s.local)),h.push(this.dataFactory.literal(s.value,e.datatype||e.language))}}if(o!==null){const p=e.subject;e.subject=l?this.dataFactory.blankNode(o):this.valueToUri(o,e),this.emitTriple(p,e.predicate,e.subject,e.reifiedStatementId);for(let s=0;s<u.length;s++)this.emitTriple(e.subject,u[s],h[s],null);e.predicateEmitted=!0}else l&&(e.predicateSubPredicates=u,e.predicateSubObjects=h,e.predicateEmitted=!1)}emitTriple(t,e,i,a){this.push(this.dataFactory.quad(t,e,i,this.defaultGraph)),a&&(this.push(this.dataFactory.quad(a,this.dataFactory.namedNode(c.RDF+"type"),this.dataFactory.namedNode(c.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(a,this.dataFactory.namedNode(c.RDF+"subject"),t,this.defaultGraph)),this.push(this.dataFactory.quad(a,this.dataFactory.namedNode(c.RDF+"predicate"),e,this.defaultGraph)),this.push(this.dataFactory.quad(a,this.dataFactory.namedNode(c.RDF+"object"),i,this.defaultGraph)))}claimNodeId(t){if(!this.allowDuplicateRdfIds){if(this.nodeIds[t.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${t.value}'.`);this.nodeIds[t.value]=!0}}onText(t){const e=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;e&&(e.childrenStringTags?e.childrenStringTags.push(t):e.predicate&&(e.text=t))}onCloseTag(){const t=this.activeTagStack.pop();if(t.childrenStringEmitClosingTag&&t.childrenStringTags.push(t.childrenStringEmitClosingTag),t.childrenTagsToString&&(t.datatype=this.dataFactory.namedNode(c.RDF+"XMLLiteral"),t.text=t.childrenStringTags.join(""),t.hadChildren=!1),t.childrenCollectionSubject)this.emitTriple(t.childrenCollectionSubject,t.childrenCollectionPredicate,this.dataFactory.namedNode(c.RDF+"nil"),t.reifiedStatementId);else if(t.predicate){if(!t.hadChildren&&t.childrenParseType!==b.PROPERTY)this.emitTriple(t.subject,t.predicate,this.dataFactory.literal(t.text||"",t.datatype||t.language),t.reifiedStatementId);else if(!t.predicateEmitted){const e=this.dataFactory.blankNode();this.emitTriple(t.subject,t.predicate,e,t.reifiedStatementId);for(let i=0;i<t.predicateSubPredicates.length;i++)this.emitTriple(e,t.predicateSubPredicates[i],t.predicateSubObjects[i],null)}}}onDoctype(t){t.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(e,i,a)=>(this.saxParser.ENTITIES[i]=a,""))}}v.RdfXmlParser=c;c.MIME_TYPE="application/rdf+xml";c.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#";c.XML="http://www.w3.org/XML/1998/namespace";c.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"];c.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"];c.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u;var b;(function(r){r[r.RESOURCE=0]="RESOURCE",r[r.PROPERTY=1]="PROPERTY"})(b||(v.ParseType=b={}));(function(r){var t=N&&N.__createBinding||(Object.create?function(i,a,n,o){o===void 0&&(o=n);var l=Object.getOwnPropertyDescriptor(a,n);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[n]}}),Object.defineProperty(i,o,l)}:function(i,a,n,o){o===void 0&&(o=n),i[o]=a[n]}),e=N&&N.__exportStar||function(i,a){for(var n in i)n!=="default"&&!Object.prototype.hasOwnProperty.call(a,n)&&t(a,i,n)};Object.defineProperty(r,"__esModule",{value:!0}),e(v,r)})(Nt);class Ze extends Nt.RdfXmlParser{constructor({factory:t,...e}={}){super({...e,dataFactory:t})}}export{Ze as default};
