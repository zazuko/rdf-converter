import{V as Me,O as be,W as Oe,X as N,U as Te,g as Ht}from"./index-BXj-mBhB.js";import{i as J,b as St}from"./browser-BwSN-dYO.js";var Ye={exports:{}},mt=Me.EventEmitter,Ce,Ze;function Vt(){if(Ze)return Ce;Ze=1;function r(p,g){var s=Object.keys(p);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(p);g&&(c=c.filter(function(T){return Object.getOwnPropertyDescriptor(p,T).enumerable})),s.push.apply(s,c)}return s}function n(p){for(var g=1;g<arguments.length;g++){var s=arguments[g]!=null?arguments[g]:{};g%2?r(Object(s),!0).forEach(function(c){f(p,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach(function(c){Object.defineProperty(p,c,Object.getOwnPropertyDescriptor(s,c))})}return p}function f(p,g,s){return g=S(g),g in p?Object.defineProperty(p,g,{value:s,enumerable:!0,configurable:!0,writable:!0}):p[g]=s,p}function b(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function d(p,g){for(var s=0;s<g.length;s++){var c=g[s];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(p,S(c.key),c)}}function w(p,g,s){return g&&d(p.prototype,g),s&&d(p,s),Object.defineProperty(p,"prototype",{writable:!1}),p}function S(p){var g=P(p,"string");return typeof g=="symbol"?g:String(g)}function P(p,g){if(typeof p!="object"||p===null)return p;var s=p[Symbol.toPrimitive];if(s!==void 0){var c=s.call(p,g||"default");if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(p)}var h=be,m=h.Buffer,j=Oe,D=j.inspect,W=D&&D.custom||"inspect";function q(p,g,s){m.prototype.copy.call(p,g,s)}return Ce=function(){function p(){b(this,p),this.head=null,this.tail=null,this.length=0}return w(p,[{key:"push",value:function(s){var c={data:s,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length}},{key:"unshift",value:function(s){var c={data:s,next:this.head};this.length===0&&(this.tail=c),this.head=c,++this.length}},{key:"shift",value:function(){if(this.length!==0){var s=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,s}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(s){if(this.length===0)return"";for(var c=this.head,T=""+c.data;c=c.next;)T+=s+c.data;return T}},{key:"concat",value:function(s){if(this.length===0)return m.alloc(0);for(var c=m.allocUnsafe(s>>>0),T=this.head,v=0;T;)q(T.data,c,v),v+=T.data.length,T=T.next;return c}},{key:"consume",value:function(s,c){var T;return s<this.head.data.length?(T=this.head.data.slice(0,s),this.head.data=this.head.data.slice(s)):s===this.head.data.length?T=this.shift():T=c?this._getString(s):this._getBuffer(s),T}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(s){var c=this.head,T=1,v=c.data;for(s-=v.length;c=c.next;){var _=c.data,R=s>_.length?_.length:s;if(R===_.length?v+=_:v+=_.slice(0,s),s-=R,s===0){R===_.length?(++T,c.next?this.head=c.next:this.head=this.tail=null):(this.head=c,c.data=_.slice(R));break}++T}return this.length-=T,v}},{key:"_getBuffer",value:function(s){var c=m.allocUnsafe(s),T=this.head,v=1;for(T.data.copy(c),s-=T.data.length;T=T.next;){var _=T.data,R=s>_.length?_.length:s;if(_.copy(c,c.length-s,0,R),s-=R,s===0){R===_.length?(++v,T.next?this.head=T.next:this.head=this.tail=null):(this.head=T,T.data=_.slice(R));break}++v}return this.length-=v,c}},{key:W,value:function(s,c){return D(this,n(n({},c),{},{depth:0,customInspect:!1}))}}]),p}(),Ce}function Gt(r,n){var f=this,b=this._readableState&&this._readableState.destroyed,d=this._writableState&&this._writableState.destroyed;return b||d?(n?n(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,N.nextTick(Ke,this,r)):N.nextTick(Ke,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(w){!n&&w?f._writableState?f._writableState.errorEmitted?N.nextTick(Se,f):(f._writableState.errorEmitted=!0,N.nextTick(et,f,w)):N.nextTick(et,f,w):n?(N.nextTick(Se,f),n(w)):N.nextTick(Se,f)}),this)}function et(r,n){Ke(r,n),Se(r)}function Se(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function Yt(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Ke(r,n){r.emit("error",n)}function Kt(r,n){var f=r._readableState,b=r._writableState;f&&f.autoDestroy||b&&b.autoDestroy?r.destroy(n):r.emit("error",n)}var Tt={destroy:Gt,undestroy:Yt,errorOrDestroy:Kt},_e={};function Xt(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n}var Mt={};function Y(r,n,f){f||(f=Error);function b(w,S,P){return typeof n=="string"?n:n(w,S,P)}var d=function(w){Xt(S,w);function S(P,h,m){return w.call(this,b(P,h,m))||this}return S}(f);d.prototype.name=f.name,d.prototype.code=r,Mt[r]=d}function tt(r,n){if(Array.isArray(r)){var f=r.length;return r=r.map(function(b){return String(b)}),f>2?"one of ".concat(n," ").concat(r.slice(0,f-1).join(", "),", or ")+r[f-1]:f===2?"one of ".concat(n," ").concat(r[0]," or ").concat(r[1]):"of ".concat(n," ").concat(r[0])}else return"of ".concat(n," ").concat(String(r))}function zt(r,n,f){return r.substr(!f||f<0?0:+f,n.length)===n}function Jt(r,n,f){return(f===void 0||f>r.length)&&(f=r.length),r.substring(f-n.length,f)===n}function Qt(r,n,f){return typeof f!="number"&&(f=0),f+n.length>r.length?!1:r.indexOf(n,f)!==-1}Y("ERR_INVALID_OPT_VALUE",function(r,n){return'The value "'+n+'" is invalid for option "'+r+'"'},TypeError);Y("ERR_INVALID_ARG_TYPE",function(r,n,f){var b;typeof n=="string"&&zt(n,"not ")?(b="must not be",n=n.replace(/^not /,"")):b="must be";var d;if(Jt(r," argument"))d="The ".concat(r," ").concat(b," ").concat(tt(n,"type"));else{var w=Qt(r,".")?"property":"argument";d='The "'.concat(r,'" ').concat(w," ").concat(b," ").concat(tt(n,"type"))}return d+=". Received type ".concat(typeof f),d},TypeError);Y("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Y("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"});Y("ERR_STREAM_PREMATURE_CLOSE","Premature close");Y("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"});Y("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Y("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Y("ERR_STREAM_WRITE_AFTER_END","write after end");Y("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Y("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError);Y("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");_e.codes=Mt;var Zt=_e.codes.ERR_INVALID_OPT_VALUE;function er(r,n,f){return r.highWaterMark!=null?r.highWaterMark:n?r[f]:null}function tr(r,n,f,b){var d=er(n,b,f);if(d!=null){if(!(isFinite(d)&&Math.floor(d)===d)||d<0){var w=b?f:"highWaterMark";throw new Zt(w,d)}return Math.floor(d)}return r.objectMode?16:16*1024}var Ot={getHighWaterMark:tr},je,rt;function At(){if(rt)return je;rt=1,je=L;function r(a){var i=this;this.next=null,this.entry=null,this.finish=function(){de(i,a)}}var n;L.WritableState=M;var f={deprecate:St},b=mt,d=be.Buffer,w=(typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function S(a){return d.from(a)}function P(a){return d.isBuffer(a)||a instanceof w}var h=Tt,m=Ot,j=m.getHighWaterMark,D=_e.codes,W=D.ERR_INVALID_ARG_TYPE,q=D.ERR_METHOD_NOT_IMPLEMENTED,p=D.ERR_MULTIPLE_CALLBACK,g=D.ERR_STREAM_CANNOT_PIPE,s=D.ERR_STREAM_DESTROYED,c=D.ERR_STREAM_NULL_VALUES,T=D.ERR_STREAM_WRITE_AFTER_END,v=D.ERR_UNKNOWN_ENCODING,_=h.errorOrDestroy;J(L,b);function R(){}function M(a,i,l){n=n||ge(),a=a||{},typeof l!="boolean"&&(l=i instanceof n),this.objectMode=!!a.objectMode,l&&(this.objectMode=this.objectMode||!!a.writableObjectMode),this.highWaterMark=j(this,a,"writableHighWaterMark",l),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var y=a.decodeStrings===!1;this.decodeStrings=!y,this.defaultEncoding=a.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(A){oe(i,A)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=a.emitClose!==!1,this.autoDestroy=!!a.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}M.prototype.getBuffer=function(){for(var i=this.bufferedRequest,l=[];i;)l.push(i),i=i.next;return l},function(){try{Object.defineProperty(M.prototype,"buffer",{get:f.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var k;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(k=Function.prototype[Symbol.hasInstance],Object.defineProperty(L,Symbol.hasInstance,{value:function(i){return k.call(this,i)?!0:this!==L?!1:i&&i._writableState instanceof M}})):k=function(i){return i instanceof this};function L(a){n=n||ge();var i=this instanceof n;if(!i&&!k.call(L,this))return new L(a);this._writableState=new M(a,this,i),this.writable=!0,a&&(typeof a.write=="function"&&(this._write=a.write),typeof a.writev=="function"&&(this._writev=a.writev),typeof a.destroy=="function"&&(this._destroy=a.destroy),typeof a.final=="function"&&(this._final=a.final)),b.call(this)}L.prototype.pipe=function(){_(this,new g)};function E(a,i){var l=new T;_(a,l),N.nextTick(i,l)}function B(a,i,l,y){var A;return l===null?A=new c:typeof l!="string"&&!i.objectMode&&(A=new W("chunk",["string","Buffer"],l)),A?(_(a,A),N.nextTick(y,A),!1):!0}L.prototype.write=function(a,i,l){var y=this._writableState,A=!1,e=!y.objectMode&&P(a);return e&&!d.isBuffer(a)&&(a=S(a)),typeof i=="function"&&(l=i,i=null),e?i="buffer":i||(i=y.defaultEncoding),typeof l!="function"&&(l=R),y.ending?E(this,l):(e||B(this,y,a,l))&&(y.pendingcb++,A=ae(this,y,e,a,i,l)),A},L.prototype.cork=function(){this._writableState.corked++},L.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,!a.writing&&!a.corked&&!a.bufferProcessing&&a.bufferedRequest&&F(this,a))},L.prototype.setDefaultEncoding=function(i){if(typeof i=="string"&&(i=i.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((i+"").toLowerCase())>-1))throw new v(i);return this._writableState.defaultEncoding=i,this},Object.defineProperty(L.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function X(a,i,l){return!a.objectMode&&a.decodeStrings!==!1&&typeof i=="string"&&(i=d.from(i,l)),i}Object.defineProperty(L.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ae(a,i,l,y,A,e){if(!l){var t=X(i,y,A);y!==t&&(l=!0,A="buffer",y=t)}var o=i.objectMode?1:y.length;i.length+=o;var u=i.length<i.highWaterMark;if(u||(i.needDrain=!0),i.writing||i.corked){var I=i.lastBufferedRequest;i.lastBufferedRequest={chunk:y,encoding:A,isBuf:l,callback:e,next:null},I?I.next=i.lastBufferedRequest:i.bufferedRequest=i.lastBufferedRequest,i.bufferedRequestCount+=1}else x(a,i,!1,o,y,A,e);return u}function x(a,i,l,y,A,e,t){i.writelen=y,i.writecb=t,i.writing=!0,i.sync=!0,i.destroyed?i.onwrite(new s("write")):l?a._writev(A,i.onwrite):a._write(A,e,i.onwrite),i.sync=!1}function fe(a,i,l,y,A){--i.pendingcb,l?(N.nextTick(A,y),N.nextTick(U,a,i),a._writableState.errorEmitted=!0,_(a,y)):(A(y),a._writableState.errorEmitted=!0,_(a,y),U(a,i))}function Q(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function oe(a,i){var l=a._writableState,y=l.sync,A=l.writecb;if(typeof A!="function")throw new p;if(Q(l),i)fe(a,l,y,i,A);else{var e=ee(l)||a.destroyed;!e&&!l.corked&&!l.bufferProcessing&&l.bufferedRequest&&F(a,l),y?N.nextTick($,a,l,e,A):$(a,l,e,A)}}function $(a,i,l,y){l||Z(a,i),i.pendingcb--,y(),U(a,i)}function Z(a,i){i.length===0&&i.needDrain&&(i.needDrain=!1,a.emit("drain"))}function F(a,i){i.bufferProcessing=!0;var l=i.bufferedRequest;if(a._writev&&l&&l.next){var y=i.bufferedRequestCount,A=new Array(y),e=i.corkedRequestsFree;e.entry=l;for(var t=0,o=!0;l;)A[t]=l,l.isBuf||(o=!1),l=l.next,t+=1;A.allBuffers=o,x(a,i,!0,i.length,A,"",e.finish),i.pendingcb++,i.lastBufferedRequest=null,e.next?(i.corkedRequestsFree=e.next,e.next=null):i.corkedRequestsFree=new r(i),i.bufferedRequestCount=0}else{for(;l;){var u=l.chunk,I=l.encoding,O=l.callback,C=i.objectMode?1:u.length;if(x(a,i,!1,C,u,I,O),l=l.next,i.bufferedRequestCount--,i.writing)break}l===null&&(i.lastBufferedRequest=null)}i.bufferedRequest=l,i.bufferProcessing=!1}L.prototype._write=function(a,i,l){l(new q("_write()"))},L.prototype._writev=null,L.prototype.end=function(a,i,l){var y=this._writableState;return typeof a=="function"?(l=a,a=null,i=null):typeof i=="function"&&(l=i,i=null),a!=null&&this.write(a,i),y.corked&&(y.corked=1,this.uncork()),y.ending||ue(this,y,l),this},Object.defineProperty(L.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ee(a){return a.ending&&a.length===0&&a.bufferedRequest===null&&!a.finished&&!a.writing}function le(a,i){a._final(function(l){i.pendingcb--,l&&_(a,l),i.prefinished=!0,a.emit("prefinish"),U(a,i)})}function te(a,i){!i.prefinished&&!i.finalCalled&&(typeof a._final=="function"&&!i.destroyed?(i.pendingcb++,i.finalCalled=!0,N.nextTick(le,a,i)):(i.prefinished=!0,a.emit("prefinish")))}function U(a,i){var l=ee(i);if(l&&(te(a,i),i.pendingcb===0&&(i.finished=!0,a.emit("finish"),i.autoDestroy))){var y=a._readableState;(!y||y.autoDestroy&&y.endEmitted)&&a.destroy()}return l}function ue(a,i,l){i.ending=!0,U(a,i),l&&(i.finished?N.nextTick(l):a.once("finish",l)),i.ended=!0,a.writable=!1}function de(a,i,l){var y=a.entry;for(a.entry=null;y;){var A=y.callback;i.pendingcb--,A(l),y=y.next}i.corkedRequestsFree.next=a}return Object.defineProperty(L.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(i){this._writableState&&(this._writableState.destroyed=i)}}),L.prototype.destroy=h.destroy,L.prototype._undestroy=h.undestroy,L.prototype._destroy=function(a,i){i(a)},je}var Ie,it;function ge(){if(it)return Ie;it=1;var r=Object.keys||function(m){var j=[];for(var D in m)j.push(D);return j};Ie=S;var n=Pt(),f=At();J(S,n);for(var b=r(f.prototype),d=0;d<b.length;d++){var w=b[d];S.prototype[w]||(S.prototype[w]=f.prototype[w])}function S(m){if(!(this instanceof S))return new S(m);n.call(this,m),f.call(this,m),this.allowHalfOpen=!0,m&&(m.readable===!1&&(this.readable=!1),m.writable===!1&&(this.writable=!1),m.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",P)))}Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function P(){this._writableState.ended||N.nextTick(h,this)}function h(m){m.end()}return Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(j){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=j,this._writableState.destroyed=j)}}),Ie}var nt=_e.codes.ERR_STREAM_PREMATURE_CLOSE;function rr(r){var n=!1;return function(){if(!n){n=!0;for(var f=arguments.length,b=new Array(f),d=0;d<f;d++)b[d]=arguments[d];r.apply(this,b)}}}function ir(){}function nr(r){return r.setHeader&&typeof r.abort=="function"}function Lt(r,n,f){if(typeof n=="function")return Lt(r,null,n);n||(n={}),f=rr(f||ir);var b=n.readable||n.readable!==!1&&r.readable,d=n.writable||n.writable!==!1&&r.writable,w=function(){r.writable||P()},S=r._writableState&&r._writableState.finished,P=function(){d=!1,S=!0,b||f.call(r)},h=r._readableState&&r._readableState.endEmitted,m=function(){b=!1,h=!0,d||f.call(r)},j=function(p){f.call(r,p)},D=function(){var p;if(b&&!h)return(!r._readableState||!r._readableState.ended)&&(p=new nt),f.call(r,p);if(d&&!S)return(!r._writableState||!r._writableState.ended)&&(p=new nt),f.call(r,p)},W=function(){r.req.on("finish",P)};return nr(r)?(r.on("complete",P),r.on("abort",D),r.req?W():r.on("request",W)):d&&!r._writableState&&(r.on("end",w),r.on("close",w)),r.on("end",m),r.on("finish",P),n.error!==!1&&r.on("error",j),r.on("close",D),function(){r.removeListener("complete",P),r.removeListener("abort",D),r.removeListener("request",W),r.req&&r.req.removeListener("finish",P),r.removeListener("end",w),r.removeListener("close",w),r.removeListener("finish",P),r.removeListener("end",m),r.removeListener("error",j),r.removeListener("close",D)}}var Je=Lt,ke,at;function ar(){if(at)return ke;at=1;var r;function n(v,_,R){return _=f(_),_ in v?Object.defineProperty(v,_,{value:R,enumerable:!0,configurable:!0,writable:!0}):v[_]=R,v}function f(v){var _=b(v,"string");return typeof _=="symbol"?_:String(_)}function b(v,_){if(typeof v!="object"||v===null)return v;var R=v[Symbol.toPrimitive];if(R!==void 0){var M=R.call(v,_||"default");if(typeof M!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(v)}var d=Je,w=Symbol("lastResolve"),S=Symbol("lastReject"),P=Symbol("error"),h=Symbol("ended"),m=Symbol("lastPromise"),j=Symbol("handlePromise"),D=Symbol("stream");function W(v,_){return{value:v,done:_}}function q(v){var _=v[w];if(_!==null){var R=v[D].read();R!==null&&(v[m]=null,v[w]=null,v[S]=null,_(W(R,!1)))}}function p(v){N.nextTick(q,v)}function g(v,_){return function(R,M){v.then(function(){if(_[h]){R(W(void 0,!0));return}_[j](R,M)},M)}}var s=Object.getPrototypeOf(function(){}),c=Object.setPrototypeOf((r={get stream(){return this[D]},next:function(){var _=this,R=this[P];if(R!==null)return Promise.reject(R);if(this[h])return Promise.resolve(W(void 0,!0));if(this[D].destroyed)return new Promise(function(E,B){N.nextTick(function(){_[P]?B(_[P]):E(W(void 0,!0))})});var M=this[m],k;if(M)k=new Promise(g(M,this));else{var L=this[D].read();if(L!==null)return Promise.resolve(W(L,!1));k=new Promise(this[j])}return this[m]=k,k}},n(r,Symbol.asyncIterator,function(){return this}),n(r,"return",function(){var _=this;return new Promise(function(R,M){_[D].destroy(null,function(k){if(k){M(k);return}R(W(void 0,!0))})})}),r),s),T=function(_){var R,M=Object.create(c,(R={},n(R,D,{value:_,writable:!0}),n(R,w,{value:null,writable:!0}),n(R,S,{value:null,writable:!0}),n(R,P,{value:null,writable:!0}),n(R,h,{value:_._readableState.endEmitted,writable:!0}),n(R,j,{value:function(L,E){var B=M[D].read();B?(M[m]=null,M[w]=null,M[S]=null,L(W(B,!1))):(M[w]=L,M[S]=E)},writable:!0}),R));return M[m]=null,d(_,function(k){if(k&&k.code!=="ERR_STREAM_PREMATURE_CLOSE"){var L=M[S];L!==null&&(M[m]=null,M[w]=null,M[S]=null,L(k)),M[P]=k;return}var E=M[w];E!==null&&(M[m]=null,M[w]=null,M[S]=null,E(W(void 0,!0))),M[h]=!0}),_.on("readable",p.bind(null,M)),M};return ke=T,ke}var We,ft;function fr(){return ft||(ft=1,We=function(){throw new Error("Readable.from is not available in the browser")}),We}var qe,ot;function Pt(){if(ot)return qe;ot=1,qe=E;var r;E.ReadableState=L,Me.EventEmitter;var n=function(t,o){return t.listeners(o).length},f=mt,b=be.Buffer,d=(typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function w(e){return b.from(e)}function S(e){return b.isBuffer(e)||e instanceof d}var P=Oe,h;P&&P.debuglog?h=P.debuglog("stream"):h=function(){};var m=Vt(),j=Tt,D=Ot,W=D.getHighWaterMark,q=_e.codes,p=q.ERR_INVALID_ARG_TYPE,g=q.ERR_STREAM_PUSH_AFTER_EOF,s=q.ERR_METHOD_NOT_IMPLEMENTED,c=q.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,T,v,_;J(E,f);var R=j.errorOrDestroy,M=["error","close","destroy","pause","resume"];function k(e,t,o){if(typeof e.prependListener=="function")return e.prependListener(t,o);!e._events||!e._events[t]?e.on(t,o):Array.isArray(e._events[t])?e._events[t].unshift(o):e._events[t]=[o,e._events[t]]}function L(e,t,o){r=r||ge(),e=e||{},typeof o!="boolean"&&(o=t instanceof r),this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=W(this,e,"readableHighWaterMark",o),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=e.emitClose!==!1,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(T||(T=Te.StringDecoder),this.decoder=new T(e.encoding),this.encoding=e.encoding)}function E(e){if(r=r||ge(),!(this instanceof E))return new E(e);var t=this instanceof r;this._readableState=new L(e,this,t),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),f.call(this)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),E.prototype.destroy=j.destroy,E.prototype._undestroy=j.undestroy,E.prototype._destroy=function(e,t){t(e)},E.prototype.push=function(e,t){var o=this._readableState,u;return o.objectMode?u=!0:typeof e=="string"&&(t=t||o.defaultEncoding,t!==o.encoding&&(e=b.from(e,t),t=""),u=!0),B(this,e,t,!1,u)},E.prototype.unshift=function(e){return B(this,e,null,!0,!1)};function B(e,t,o,u,I){h("readableAddChunk",t);var O=e._readableState;if(t===null)O.reading=!1,oe(e,O);else{var C;if(I||(C=ae(O,t)),C)R(e,C);else if(O.objectMode||t&&t.length>0)if(typeof t!="string"&&!O.objectMode&&Object.getPrototypeOf(t)!==b.prototype&&(t=w(t)),u)O.endEmitted?R(e,new c):X(e,O,t,!0);else if(O.ended)R(e,new g);else{if(O.destroyed)return!1;O.reading=!1,O.decoder&&!o?(t=O.decoder.write(t),O.objectMode||t.length!==0?X(e,O,t,!1):F(e,O)):X(e,O,t,!1)}else u||(O.reading=!1,F(e,O))}return!O.ended&&(O.length<O.highWaterMark||O.length===0)}function X(e,t,o,u){t.flowing&&t.length===0&&!t.sync?(t.awaitDrain=0,e.emit("data",o)):(t.length+=t.objectMode?1:o.length,u?t.buffer.unshift(o):t.buffer.push(o),t.needReadable&&$(e)),F(e,t)}function ae(e,t){var o;return!S(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(o=new p("chunk",["string","Buffer","Uint8Array"],t)),o}E.prototype.isPaused=function(){return this._readableState.flowing===!1},E.prototype.setEncoding=function(e){T||(T=Te.StringDecoder);var t=new T(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var o=this._readableState.buffer.head,u="";o!==null;)u+=t.write(o.data),o=o.next;return this._readableState.buffer.clear(),u!==""&&this._readableState.buffer.push(u),this._readableState.length=u.length,this};var x=1073741824;function fe(e){return e>=x?e=x:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function Q(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=fe(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}E.prototype.read=function(e){h("read",e),e=parseInt(e,10);var t=this._readableState,o=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&((t.highWaterMark!==0?t.length>=t.highWaterMark:t.length>0)||t.ended))return h("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?l(this):$(this),null;if(e=Q(e,t),e===0&&t.ended)return t.length===0&&l(this),null;var u=t.needReadable;h("need readable",u),(t.length===0||t.length-e<t.highWaterMark)&&(u=!0,h("length less than watermark",u)),t.ended||t.reading?(u=!1,h("reading or ended",u)):u&&(h("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Q(o,t)));var I;return e>0?I=i(e,t):I=null,I===null?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),t.length===0&&(t.ended||(t.needReadable=!0),o!==e&&t.ended&&l(this)),I!==null&&this.emit("data",I),I};function oe(e,t){if(h("onEofChunk"),!t.ended){if(t.decoder){var o=t.decoder.end();o&&o.length&&(t.buffer.push(o),t.length+=t.objectMode?1:o.length)}t.ended=!0,t.sync?$(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,Z(e)))}}function $(e){var t=e._readableState;h("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(h("emitReadable",t.flowing),t.emittedReadable=!0,N.nextTick(Z,e))}function Z(e){var t=e._readableState;h("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,a(e)}function F(e,t){t.readingMore||(t.readingMore=!0,N.nextTick(ee,e,t))}function ee(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&t.length===0);){var o=t.length;if(h("maybeReadMore read 0"),e.read(0),o===t.length)break}t.readingMore=!1}E.prototype._read=function(e){R(this,new s("_read()"))},E.prototype.pipe=function(e,t){var o=this,u=this._readableState;switch(u.pipesCount){case 0:u.pipes=e;break;case 1:u.pipes=[u.pipes,e];break;default:u.pipes.push(e);break}u.pipesCount+=1,h("pipe count=%d opts=%j",u.pipesCount,t);var I=(!t||t.end!==!1)&&e!==N.stdout&&e!==N.stderr,O=I?H:z;u.endEmitted?N.nextTick(O):o.once("end",O),e.on("unpipe",C);function C(V,G){h("onunpipe"),V===o&&G&&G.hasUnpiped===!1&&(G.hasUnpiped=!0,Ne())}function H(){h("onend"),e.end()}var re=le(o);e.on("drain",re);var ve=!1;function Ne(){h("cleanup"),e.removeListener("close",he),e.removeListener("finish",ce),e.removeListener("drain",re),e.removeListener("error",se),e.removeListener("unpipe",C),o.removeListener("end",H),o.removeListener("end",z),o.removeListener("data",we),ve=!0,u.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&re()}o.on("data",we);function we(V){h("ondata");var G=e.write(V);h("dest.write",G),G===!1&&((u.pipesCount===1&&u.pipes===e||u.pipesCount>1&&A(u.pipes,e)!==-1)&&!ve&&(h("false write response, pause",u.awaitDrain),u.awaitDrain++),o.pause())}function se(V){h("onerror",V),z(),e.removeListener("error",se),n(e,"error")===0&&R(e,V)}k(e,"error",se);function he(){e.removeListener("finish",ce),z()}e.once("close",he);function ce(){h("onfinish"),e.removeListener("close",he),z()}e.once("finish",ce);function z(){h("unpipe"),o.unpipe(e)}return e.emit("pipe",o),u.flowing||(h("pipe resume"),o.resume()),e};function le(e){return function(){var o=e._readableState;h("pipeOnDrain",o.awaitDrain),o.awaitDrain&&o.awaitDrain--,o.awaitDrain===0&&n(e,"data")&&(o.flowing=!0,a(e))}}E.prototype.unpipe=function(e){var t=this._readableState,o={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,o),this);if(!e){var u=t.pipes,I=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var O=0;O<I;O++)u[O].emit("unpipe",this,{hasUnpiped:!1});return this}var C=A(t.pipes,e);return C===-1?this:(t.pipes.splice(C,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,o),this)},E.prototype.on=function(e,t){var o=f.prototype.on.call(this,e,t),u=this._readableState;return e==="data"?(u.readableListening=this.listenerCount("readable")>0,u.flowing!==!1&&this.resume()):e==="readable"&&!u.endEmitted&&!u.readableListening&&(u.readableListening=u.needReadable=!0,u.flowing=!1,u.emittedReadable=!1,h("on readable",u.length,u.reading),u.length?$(this):u.reading||N.nextTick(U,this)),o},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(e,t){var o=f.prototype.removeListener.call(this,e,t);return e==="readable"&&N.nextTick(te,this),o},E.prototype.removeAllListeners=function(e){var t=f.prototype.removeAllListeners.apply(this,arguments);return(e==="readable"||e===void 0)&&N.nextTick(te,this),t};function te(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function U(e){h("readable nexttick read 0"),e.read(0)}E.prototype.resume=function(){var e=this._readableState;return e.flowing||(h("resume"),e.flowing=!e.readableListening,ue(this,e)),e.paused=!1,this};function ue(e,t){t.resumeScheduled||(t.resumeScheduled=!0,N.nextTick(de,e,t))}function de(e,t){h("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),a(e),t.flowing&&!t.reading&&e.read(0)}E.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function a(e){var t=e._readableState;for(h("flow",t.flowing);t.flowing&&e.read()!==null;);}E.prototype.wrap=function(e){var t=this,o=this._readableState,u=!1;e.on("end",function(){if(h("wrapped end"),o.decoder&&!o.ended){var C=o.decoder.end();C&&C.length&&t.push(C)}t.push(null)}),e.on("data",function(C){if(h("wrapped data"),o.decoder&&(C=o.decoder.write(C)),!(o.objectMode&&C==null)&&!(!o.objectMode&&(!C||!C.length))){var H=t.push(C);H||(u=!0,e.pause())}});for(var I in e)this[I]===void 0&&typeof e[I]=="function"&&(this[I]=function(H){return function(){return e[H].apply(e,arguments)}}(I));for(var O=0;O<M.length;O++)e.on(M[O],this.emit.bind(this,M[O]));return this._read=function(C){h("wrapped _read",C),u&&(u=!1,e.resume())},this},typeof Symbol=="function"&&(E.prototype[Symbol.asyncIterator]=function(){return v===void 0&&(v=ar()),v(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),E._fromList=i,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function i(e,t){if(t.length===0)return null;var o;return t.objectMode?o=t.buffer.shift():!e||e>=t.length?(t.decoder?o=t.buffer.join(""):t.buffer.length===1?o=t.buffer.first():o=t.buffer.concat(t.length),t.buffer.clear()):o=t.buffer.consume(e,t.decoder),o}function l(e){var t=e._readableState;h("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,N.nextTick(y,t,e))}function y(e,t){if(h("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var o=t._writableState;(!o||o.autoDestroy&&o.finished)&&t.destroy()}}typeof Symbol=="function"&&(E.from=function(e,t){return _===void 0&&(_=fr()),_(E,e,t)});function A(e,t){for(var o=0,u=e.length;o<u;o++)if(e[o]===t)return o;return-1}return qe}var Dt=ie,Ae=_e.codes,or=Ae.ERR_METHOD_NOT_IMPLEMENTED,lr=Ae.ERR_MULTIPLE_CALLBACK,ur=Ae.ERR_TRANSFORM_ALREADY_TRANSFORMING,dr=Ae.ERR_TRANSFORM_WITH_LENGTH_0,Le=ge();J(ie,Le);function sr(r,n){var f=this._transformState;f.transforming=!1;var b=f.writecb;if(b===null)return this.emit("error",new lr);f.writechunk=null,f.writecb=null,n!=null&&this.push(n),b(r);var d=this._readableState;d.reading=!1,(d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}function ie(r){if(!(this instanceof ie))return new ie(r);Le.call(this,r),this._transformState={afterTransform:sr.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.on("prefinish",hr)}function hr(){var r=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(n,f){lt(r,n,f)}):lt(this,null,null)}ie.prototype.push=function(r,n){return this._transformState.needTransform=!1,Le.prototype.push.call(this,r,n)};ie.prototype._transform=function(r,n,f){f(new or("_transform()"))};ie.prototype._write=function(r,n,f){var b=this._transformState;if(b.writecb=f,b.writechunk=r,b.writeencoding=n,!b.transforming){var d=this._readableState;(b.needTransform||d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}};ie.prototype._read=function(r){var n=this._transformState;n.writechunk!==null&&!n.transforming?(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform)):n.needTransform=!0};ie.prototype._destroy=function(r,n){Le.prototype._destroy.call(this,r,function(f){n(f)})};function lt(r,n,f){if(n)return r.emit("error",n);if(f!=null&&r.push(f),r._writableState.length)throw new dr;if(r._transformState.transforming)throw new ur;return r.push(null)}var cr=Re,Nt=Dt;J(Re,Nt);function Re(r){if(!(this instanceof Re))return new Re(r);Nt.call(this,r)}Re.prototype._transform=function(r,n,f){f(null,r)};var Be;function br(r){var n=!1;return function(){n||(n=!0,r.apply(void 0,arguments))}}var Ct=_e.codes,_r=Ct.ERR_MISSING_ARGS,pr=Ct.ERR_STREAM_DESTROYED;function ut(r){if(r)throw r}function gr(r){return r.setHeader&&typeof r.abort=="function"}function yr(r,n,f,b){b=br(b);var d=!1;r.on("close",function(){d=!0}),Be===void 0&&(Be=Je),Be(r,{readable:n,writable:f},function(S){if(S)return b(S);d=!0,b()});var w=!1;return function(S){if(!d&&!w){if(w=!0,gr(r))return r.abort();if(typeof r.destroy=="function")return r.destroy();b(S||new pr("pipe"))}}}function dt(r){r()}function vr(r,n){return r.pipe(n)}function wr(r){return!r.length||typeof r[r.length-1]!="function"?ut:r.pop()}function Rr(){for(var r=arguments.length,n=new Array(r),f=0;f<r;f++)n[f]=arguments[f];var b=wr(n);if(Array.isArray(n[0])&&(n=n[0]),n.length<2)throw new _r("streams");var d,w=n.map(function(S,P){var h=P<n.length-1,m=P>0;return yr(S,h,m,function(j){d||(d=j),j&&w.forEach(dt),!h&&(w.forEach(dt),b(d))})});return n.reduce(vr)}var Er=Rr;(function(r,n){n=r.exports=Pt(),n.Stream=n,n.Readable=n,n.Writable=At(),n.Duplex=ge(),n.Transform=Dt,n.PassThrough=cr,n.finished=Je,n.pipeline=Er})(Ye,Ye.exports);var Sr=Ye.exports,mr=Or;const Tr=Sr;class Mr extends Tr.Readable{constructor(n,f){super(),this._str=n,this._encoding=f||"utf8"}_read(){this.ended||(N.nextTick(()=>{this.push(be.Buffer.from(this._str,this._encoding)),this.push(null)}),this.ended=!0)}}function Or(r,n){return new Mr(r,n)}const Ar=Ht(mr);var Xe={exports:{}},jt=Me.EventEmitter,$e,st;function Lr(){if(st)return $e;st=1;function r(p,g){var s=Object.keys(p);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(p);g&&(c=c.filter(function(T){return Object.getOwnPropertyDescriptor(p,T).enumerable})),s.push.apply(s,c)}return s}function n(p){for(var g=1;g<arguments.length;g++){var s=arguments[g]!=null?arguments[g]:{};g%2?r(Object(s),!0).forEach(function(c){f(p,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach(function(c){Object.defineProperty(p,c,Object.getOwnPropertyDescriptor(s,c))})}return p}function f(p,g,s){return g=S(g),g in p?Object.defineProperty(p,g,{value:s,enumerable:!0,configurable:!0,writable:!0}):p[g]=s,p}function b(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function d(p,g){for(var s=0;s<g.length;s++){var c=g[s];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(p,S(c.key),c)}}function w(p,g,s){return g&&d(p.prototype,g),s&&d(p,s),Object.defineProperty(p,"prototype",{writable:!1}),p}function S(p){var g=P(p,"string");return typeof g=="symbol"?g:String(g)}function P(p,g){if(typeof p!="object"||p===null)return p;var s=p[Symbol.toPrimitive];if(s!==void 0){var c=s.call(p,g||"default");if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(p)}var h=be,m=h.Buffer,j=Oe,D=j.inspect,W=D&&D.custom||"inspect";function q(p,g,s){m.prototype.copy.call(p,g,s)}return $e=function(){function p(){b(this,p),this.head=null,this.tail=null,this.length=0}return w(p,[{key:"push",value:function(s){var c={data:s,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length}},{key:"unshift",value:function(s){var c={data:s,next:this.head};this.length===0&&(this.tail=c),this.head=c,++this.length}},{key:"shift",value:function(){if(this.length!==0){var s=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,s}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(s){if(this.length===0)return"";for(var c=this.head,T=""+c.data;c=c.next;)T+=s+c.data;return T}},{key:"concat",value:function(s){if(this.length===0)return m.alloc(0);for(var c=m.allocUnsafe(s>>>0),T=this.head,v=0;T;)q(T.data,c,v),v+=T.data.length,T=T.next;return c}},{key:"consume",value:function(s,c){var T;return s<this.head.data.length?(T=this.head.data.slice(0,s),this.head.data=this.head.data.slice(s)):s===this.head.data.length?T=this.shift():T=c?this._getString(s):this._getBuffer(s),T}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(s){var c=this.head,T=1,v=c.data;for(s-=v.length;c=c.next;){var _=c.data,R=s>_.length?_.length:s;if(R===_.length?v+=_:v+=_.slice(0,s),s-=R,s===0){R===_.length?(++T,c.next?this.head=c.next:this.head=this.tail=null):(this.head=c,c.data=_.slice(R));break}++T}return this.length-=T,v}},{key:"_getBuffer",value:function(s){var c=m.allocUnsafe(s),T=this.head,v=1;for(T.data.copy(c),s-=T.data.length;T=T.next;){var _=T.data,R=s>_.length?_.length:s;if(_.copy(c,c.length-s,0,R),s-=R,s===0){R===_.length?(++v,T.next?this.head=T.next:this.head=this.tail=null):(this.head=T,T.data=_.slice(R));break}++v}return this.length-=v,c}},{key:W,value:function(s,c){return D(this,n(n({},c),{},{depth:0,customInspect:!1}))}}]),p}(),$e}function Pr(r,n){var f=this,b=this._readableState&&this._readableState.destroyed,d=this._writableState&&this._writableState.destroyed;return b||d?(n?n(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,N.nextTick(ze,this,r)):N.nextTick(ze,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(w){!n&&w?f._writableState?f._writableState.errorEmitted?N.nextTick(me,f):(f._writableState.errorEmitted=!0,N.nextTick(ht,f,w)):N.nextTick(ht,f,w):n?(N.nextTick(me,f),n(w)):N.nextTick(me,f)}),this)}function ht(r,n){ze(r,n),me(r)}function me(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function Dr(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function ze(r,n){r.emit("error",n)}function Nr(r,n){var f=r._readableState,b=r._writableState;f&&f.autoDestroy||b&&b.autoDestroy?r.destroy(n):r.emit("error",n)}var It={destroy:Pr,undestroy:Dr,errorOrDestroy:Nr},pe={};function Cr(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n}var kt={};function K(r,n,f){f||(f=Error);function b(w,S,P){return typeof n=="string"?n:n(w,S,P)}var d=function(w){Cr(S,w);function S(P,h,m){return w.call(this,b(P,h,m))||this}return S}(f);d.prototype.name=f.name,d.prototype.code=r,kt[r]=d}function ct(r,n){if(Array.isArray(r)){var f=r.length;return r=r.map(function(b){return String(b)}),f>2?"one of ".concat(n," ").concat(r.slice(0,f-1).join(", "),", or ")+r[f-1]:f===2?"one of ".concat(n," ").concat(r[0]," or ").concat(r[1]):"of ".concat(n," ").concat(r[0])}else return"of ".concat(n," ").concat(String(r))}function jr(r,n,f){return r.substr(!f||f<0?0:+f,n.length)===n}function Ir(r,n,f){return(f===void 0||f>r.length)&&(f=r.length),r.substring(f-n.length,f)===n}function kr(r,n,f){return typeof f!="number"&&(f=0),f+n.length>r.length?!1:r.indexOf(n,f)!==-1}K("ERR_INVALID_OPT_VALUE",function(r,n){return'The value "'+n+'" is invalid for option "'+r+'"'},TypeError);K("ERR_INVALID_ARG_TYPE",function(r,n,f){var b;typeof n=="string"&&jr(n,"not ")?(b="must not be",n=n.replace(/^not /,"")):b="must be";var d;if(Ir(r," argument"))d="The ".concat(r," ").concat(b," ").concat(ct(n,"type"));else{var w=kr(r,".")?"property":"argument";d='The "'.concat(r,'" ').concat(w," ").concat(b," ").concat(ct(n,"type"))}return d+=". Received type ".concat(typeof f),d},TypeError);K("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");K("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"});K("ERR_STREAM_PREMATURE_CLOSE","Premature close");K("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"});K("ERR_MULTIPLE_CALLBACK","Callback called multiple times");K("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");K("ERR_STREAM_WRITE_AFTER_END","write after end");K("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);K("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError);K("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");pe.codes=kt;var Wr=pe.codes.ERR_INVALID_OPT_VALUE;function qr(r,n,f){return r.highWaterMark!=null?r.highWaterMark:n?r[f]:null}function Br(r,n,f,b){var d=qr(n,b,f);if(d!=null){if(!(isFinite(d)&&Math.floor(d)===d)||d<0){var w=b?f:"highWaterMark";throw new Wr(w,d)}return Math.floor(d)}return r.objectMode?16:16*1024}var Wt={getHighWaterMark:Br},Ue,bt;function qt(){if(bt)return Ue;bt=1,Ue=L;function r(a){var i=this;this.next=null,this.entry=null,this.finish=function(){de(i,a)}}var n;L.WritableState=M;var f={deprecate:St},b=jt,d=be.Buffer,w=(typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function S(a){return d.from(a)}function P(a){return d.isBuffer(a)||a instanceof w}var h=It,m=Wt,j=m.getHighWaterMark,D=pe.codes,W=D.ERR_INVALID_ARG_TYPE,q=D.ERR_METHOD_NOT_IMPLEMENTED,p=D.ERR_MULTIPLE_CALLBACK,g=D.ERR_STREAM_CANNOT_PIPE,s=D.ERR_STREAM_DESTROYED,c=D.ERR_STREAM_NULL_VALUES,T=D.ERR_STREAM_WRITE_AFTER_END,v=D.ERR_UNKNOWN_ENCODING,_=h.errorOrDestroy;J(L,b);function R(){}function M(a,i,l){n=n||ye(),a=a||{},typeof l!="boolean"&&(l=i instanceof n),this.objectMode=!!a.objectMode,l&&(this.objectMode=this.objectMode||!!a.writableObjectMode),this.highWaterMark=j(this,a,"writableHighWaterMark",l),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var y=a.decodeStrings===!1;this.decodeStrings=!y,this.defaultEncoding=a.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(A){oe(i,A)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=a.emitClose!==!1,this.autoDestroy=!!a.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}M.prototype.getBuffer=function(){for(var i=this.bufferedRequest,l=[];i;)l.push(i),i=i.next;return l},function(){try{Object.defineProperty(M.prototype,"buffer",{get:f.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var k;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(k=Function.prototype[Symbol.hasInstance],Object.defineProperty(L,Symbol.hasInstance,{value:function(i){return k.call(this,i)?!0:this!==L?!1:i&&i._writableState instanceof M}})):k=function(i){return i instanceof this};function L(a){n=n||ye();var i=this instanceof n;if(!i&&!k.call(L,this))return new L(a);this._writableState=new M(a,this,i),this.writable=!0,a&&(typeof a.write=="function"&&(this._write=a.write),typeof a.writev=="function"&&(this._writev=a.writev),typeof a.destroy=="function"&&(this._destroy=a.destroy),typeof a.final=="function"&&(this._final=a.final)),b.call(this)}L.prototype.pipe=function(){_(this,new g)};function E(a,i){var l=new T;_(a,l),N.nextTick(i,l)}function B(a,i,l,y){var A;return l===null?A=new c:typeof l!="string"&&!i.objectMode&&(A=new W("chunk",["string","Buffer"],l)),A?(_(a,A),N.nextTick(y,A),!1):!0}L.prototype.write=function(a,i,l){var y=this._writableState,A=!1,e=!y.objectMode&&P(a);return e&&!d.isBuffer(a)&&(a=S(a)),typeof i=="function"&&(l=i,i=null),e?i="buffer":i||(i=y.defaultEncoding),typeof l!="function"&&(l=R),y.ending?E(this,l):(e||B(this,y,a,l))&&(y.pendingcb++,A=ae(this,y,e,a,i,l)),A},L.prototype.cork=function(){this._writableState.corked++},L.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,!a.writing&&!a.corked&&!a.bufferProcessing&&a.bufferedRequest&&F(this,a))},L.prototype.setDefaultEncoding=function(i){if(typeof i=="string"&&(i=i.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((i+"").toLowerCase())>-1))throw new v(i);return this._writableState.defaultEncoding=i,this},Object.defineProperty(L.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function X(a,i,l){return!a.objectMode&&a.decodeStrings!==!1&&typeof i=="string"&&(i=d.from(i,l)),i}Object.defineProperty(L.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ae(a,i,l,y,A,e){if(!l){var t=X(i,y,A);y!==t&&(l=!0,A="buffer",y=t)}var o=i.objectMode?1:y.length;i.length+=o;var u=i.length<i.highWaterMark;if(u||(i.needDrain=!0),i.writing||i.corked){var I=i.lastBufferedRequest;i.lastBufferedRequest={chunk:y,encoding:A,isBuf:l,callback:e,next:null},I?I.next=i.lastBufferedRequest:i.bufferedRequest=i.lastBufferedRequest,i.bufferedRequestCount+=1}else x(a,i,!1,o,y,A,e);return u}function x(a,i,l,y,A,e,t){i.writelen=y,i.writecb=t,i.writing=!0,i.sync=!0,i.destroyed?i.onwrite(new s("write")):l?a._writev(A,i.onwrite):a._write(A,e,i.onwrite),i.sync=!1}function fe(a,i,l,y,A){--i.pendingcb,l?(N.nextTick(A,y),N.nextTick(U,a,i),a._writableState.errorEmitted=!0,_(a,y)):(A(y),a._writableState.errorEmitted=!0,_(a,y),U(a,i))}function Q(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function oe(a,i){var l=a._writableState,y=l.sync,A=l.writecb;if(typeof A!="function")throw new p;if(Q(l),i)fe(a,l,y,i,A);else{var e=ee(l)||a.destroyed;!e&&!l.corked&&!l.bufferProcessing&&l.bufferedRequest&&F(a,l),y?N.nextTick($,a,l,e,A):$(a,l,e,A)}}function $(a,i,l,y){l||Z(a,i),i.pendingcb--,y(),U(a,i)}function Z(a,i){i.length===0&&i.needDrain&&(i.needDrain=!1,a.emit("drain"))}function F(a,i){i.bufferProcessing=!0;var l=i.bufferedRequest;if(a._writev&&l&&l.next){var y=i.bufferedRequestCount,A=new Array(y),e=i.corkedRequestsFree;e.entry=l;for(var t=0,o=!0;l;)A[t]=l,l.isBuf||(o=!1),l=l.next,t+=1;A.allBuffers=o,x(a,i,!0,i.length,A,"",e.finish),i.pendingcb++,i.lastBufferedRequest=null,e.next?(i.corkedRequestsFree=e.next,e.next=null):i.corkedRequestsFree=new r(i),i.bufferedRequestCount=0}else{for(;l;){var u=l.chunk,I=l.encoding,O=l.callback,C=i.objectMode?1:u.length;if(x(a,i,!1,C,u,I,O),l=l.next,i.bufferedRequestCount--,i.writing)break}l===null&&(i.lastBufferedRequest=null)}i.bufferedRequest=l,i.bufferProcessing=!1}L.prototype._write=function(a,i,l){l(new q("_write()"))},L.prototype._writev=null,L.prototype.end=function(a,i,l){var y=this._writableState;return typeof a=="function"?(l=a,a=null,i=null):typeof i=="function"&&(l=i,i=null),a!=null&&this.write(a,i),y.corked&&(y.corked=1,this.uncork()),y.ending||ue(this,y,l),this},Object.defineProperty(L.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ee(a){return a.ending&&a.length===0&&a.bufferedRequest===null&&!a.finished&&!a.writing}function le(a,i){a._final(function(l){i.pendingcb--,l&&_(a,l),i.prefinished=!0,a.emit("prefinish"),U(a,i)})}function te(a,i){!i.prefinished&&!i.finalCalled&&(typeof a._final=="function"&&!i.destroyed?(i.pendingcb++,i.finalCalled=!0,N.nextTick(le,a,i)):(i.prefinished=!0,a.emit("prefinish")))}function U(a,i){var l=ee(i);if(l&&(te(a,i),i.pendingcb===0&&(i.finished=!0,a.emit("finish"),i.autoDestroy))){var y=a._readableState;(!y||y.autoDestroy&&y.endEmitted)&&a.destroy()}return l}function ue(a,i,l){i.ending=!0,U(a,i),l&&(i.finished?N.nextTick(l):a.once("finish",l)),i.ended=!0,a.writable=!1}function de(a,i,l){var y=a.entry;for(a.entry=null;y;){var A=y.callback;i.pendingcb--,A(l),y=y.next}i.corkedRequestsFree.next=a}return Object.defineProperty(L.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(i){this._writableState&&(this._writableState.destroyed=i)}}),L.prototype.destroy=h.destroy,L.prototype._undestroy=h.undestroy,L.prototype._destroy=function(a,i){i(a)},Ue}var xe,_t;function ye(){if(_t)return xe;_t=1;var r=Object.keys||function(m){var j=[];for(var D in m)j.push(D);return j};xe=S;var n=$t(),f=qt();J(S,n);for(var b=r(f.prototype),d=0;d<b.length;d++){var w=b[d];S.prototype[w]||(S.prototype[w]=f.prototype[w])}function S(m){if(!(this instanceof S))return new S(m);n.call(this,m),f.call(this,m),this.allowHalfOpen=!0,m&&(m.readable===!1&&(this.readable=!1),m.writable===!1&&(this.writable=!1),m.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",P)))}Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function P(){this._writableState.ended||N.nextTick(h,this)}function h(m){m.end()}return Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(j){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=j,this._writableState.destroyed=j)}}),xe}var pt=pe.codes.ERR_STREAM_PREMATURE_CLOSE;function $r(r){var n=!1;return function(){if(!n){n=!0;for(var f=arguments.length,b=new Array(f),d=0;d<f;d++)b[d]=arguments[d];r.apply(this,b)}}}function Ur(){}function xr(r){return r.setHeader&&typeof r.abort=="function"}function Bt(r,n,f){if(typeof n=="function")return Bt(r,null,n);n||(n={}),f=$r(f||Ur);var b=n.readable||n.readable!==!1&&r.readable,d=n.writable||n.writable!==!1&&r.writable,w=function(){r.writable||P()},S=r._writableState&&r._writableState.finished,P=function(){d=!1,S=!0,b||f.call(r)},h=r._readableState&&r._readableState.endEmitted,m=function(){b=!1,h=!0,d||f.call(r)},j=function(p){f.call(r,p)},D=function(){var p;if(b&&!h)return(!r._readableState||!r._readableState.ended)&&(p=new pt),f.call(r,p);if(d&&!S)return(!r._writableState||!r._writableState.ended)&&(p=new pt),f.call(r,p)},W=function(){r.req.on("finish",P)};return xr(r)?(r.on("complete",P),r.on("abort",D),r.req?W():r.on("request",W)):d&&!r._writableState&&(r.on("end",w),r.on("close",w)),r.on("end",m),r.on("finish",P),n.error!==!1&&r.on("error",j),r.on("close",D),function(){r.removeListener("complete",P),r.removeListener("abort",D),r.removeListener("request",W),r.req&&r.req.removeListener("finish",P),r.removeListener("end",w),r.removeListener("close",w),r.removeListener("finish",P),r.removeListener("end",m),r.removeListener("error",j),r.removeListener("close",D)}}var Qe=Bt,Fe,gt;function Fr(){if(gt)return Fe;gt=1;var r;function n(v,_,R){return _=f(_),_ in v?Object.defineProperty(v,_,{value:R,enumerable:!0,configurable:!0,writable:!0}):v[_]=R,v}function f(v){var _=b(v,"string");return typeof _=="symbol"?_:String(_)}function b(v,_){if(typeof v!="object"||v===null)return v;var R=v[Symbol.toPrimitive];if(R!==void 0){var M=R.call(v,_||"default");if(typeof M!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(v)}var d=Qe,w=Symbol("lastResolve"),S=Symbol("lastReject"),P=Symbol("error"),h=Symbol("ended"),m=Symbol("lastPromise"),j=Symbol("handlePromise"),D=Symbol("stream");function W(v,_){return{value:v,done:_}}function q(v){var _=v[w];if(_!==null){var R=v[D].read();R!==null&&(v[m]=null,v[w]=null,v[S]=null,_(W(R,!1)))}}function p(v){N.nextTick(q,v)}function g(v,_){return function(R,M){v.then(function(){if(_[h]){R(W(void 0,!0));return}_[j](R,M)},M)}}var s=Object.getPrototypeOf(function(){}),c=Object.setPrototypeOf((r={get stream(){return this[D]},next:function(){var _=this,R=this[P];if(R!==null)return Promise.reject(R);if(this[h])return Promise.resolve(W(void 0,!0));if(this[D].destroyed)return new Promise(function(E,B){N.nextTick(function(){_[P]?B(_[P]):E(W(void 0,!0))})});var M=this[m],k;if(M)k=new Promise(g(M,this));else{var L=this[D].read();if(L!==null)return Promise.resolve(W(L,!1));k=new Promise(this[j])}return this[m]=k,k}},n(r,Symbol.asyncIterator,function(){return this}),n(r,"return",function(){var _=this;return new Promise(function(R,M){_[D].destroy(null,function(k){if(k){M(k);return}R(W(void 0,!0))})})}),r),s),T=function(_){var R,M=Object.create(c,(R={},n(R,D,{value:_,writable:!0}),n(R,w,{value:null,writable:!0}),n(R,S,{value:null,writable:!0}),n(R,P,{value:null,writable:!0}),n(R,h,{value:_._readableState.endEmitted,writable:!0}),n(R,j,{value:function(L,E){var B=M[D].read();B?(M[m]=null,M[w]=null,M[S]=null,L(W(B,!1))):(M[w]=L,M[S]=E)},writable:!0}),R));return M[m]=null,d(_,function(k){if(k&&k.code!=="ERR_STREAM_PREMATURE_CLOSE"){var L=M[S];L!==null&&(M[m]=null,M[w]=null,M[S]=null,L(k)),M[P]=k;return}var E=M[w];E!==null&&(M[m]=null,M[w]=null,M[S]=null,E(W(void 0,!0))),M[h]=!0}),_.on("readable",p.bind(null,M)),M};return Fe=T,Fe}var He,yt;function Hr(){return yt||(yt=1,He=function(){throw new Error("Readable.from is not available in the browser")}),He}var Ve,vt;function $t(){if(vt)return Ve;vt=1,Ve=E;var r;E.ReadableState=L,Me.EventEmitter;var n=function(t,o){return t.listeners(o).length},f=jt,b=be.Buffer,d=(typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function w(e){return b.from(e)}function S(e){return b.isBuffer(e)||e instanceof d}var P=Oe,h;P&&P.debuglog?h=P.debuglog("stream"):h=function(){};var m=Lr(),j=It,D=Wt,W=D.getHighWaterMark,q=pe.codes,p=q.ERR_INVALID_ARG_TYPE,g=q.ERR_STREAM_PUSH_AFTER_EOF,s=q.ERR_METHOD_NOT_IMPLEMENTED,c=q.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,T,v,_;J(E,f);var R=j.errorOrDestroy,M=["error","close","destroy","pause","resume"];function k(e,t,o){if(typeof e.prependListener=="function")return e.prependListener(t,o);!e._events||!e._events[t]?e.on(t,o):Array.isArray(e._events[t])?e._events[t].unshift(o):e._events[t]=[o,e._events[t]]}function L(e,t,o){r=r||ye(),e=e||{},typeof o!="boolean"&&(o=t instanceof r),this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=W(this,e,"readableHighWaterMark",o),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=e.emitClose!==!1,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(T||(T=Te.StringDecoder),this.decoder=new T(e.encoding),this.encoding=e.encoding)}function E(e){if(r=r||ye(),!(this instanceof E))return new E(e);var t=this instanceof r;this._readableState=new L(e,this,t),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),f.call(this)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),E.prototype.destroy=j.destroy,E.prototype._undestroy=j.undestroy,E.prototype._destroy=function(e,t){t(e)},E.prototype.push=function(e,t){var o=this._readableState,u;return o.objectMode?u=!0:typeof e=="string"&&(t=t||o.defaultEncoding,t!==o.encoding&&(e=b.from(e,t),t=""),u=!0),B(this,e,t,!1,u)},E.prototype.unshift=function(e){return B(this,e,null,!0,!1)};function B(e,t,o,u,I){h("readableAddChunk",t);var O=e._readableState;if(t===null)O.reading=!1,oe(e,O);else{var C;if(I||(C=ae(O,t)),C)R(e,C);else if(O.objectMode||t&&t.length>0)if(typeof t!="string"&&!O.objectMode&&Object.getPrototypeOf(t)!==b.prototype&&(t=w(t)),u)O.endEmitted?R(e,new c):X(e,O,t,!0);else if(O.ended)R(e,new g);else{if(O.destroyed)return!1;O.reading=!1,O.decoder&&!o?(t=O.decoder.write(t),O.objectMode||t.length!==0?X(e,O,t,!1):F(e,O)):X(e,O,t,!1)}else u||(O.reading=!1,F(e,O))}return!O.ended&&(O.length<O.highWaterMark||O.length===0)}function X(e,t,o,u){t.flowing&&t.length===0&&!t.sync?(t.awaitDrain=0,e.emit("data",o)):(t.length+=t.objectMode?1:o.length,u?t.buffer.unshift(o):t.buffer.push(o),t.needReadable&&$(e)),F(e,t)}function ae(e,t){var o;return!S(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(o=new p("chunk",["string","Buffer","Uint8Array"],t)),o}E.prototype.isPaused=function(){return this._readableState.flowing===!1},E.prototype.setEncoding=function(e){T||(T=Te.StringDecoder);var t=new T(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var o=this._readableState.buffer.head,u="";o!==null;)u+=t.write(o.data),o=o.next;return this._readableState.buffer.clear(),u!==""&&this._readableState.buffer.push(u),this._readableState.length=u.length,this};var x=1073741824;function fe(e){return e>=x?e=x:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function Q(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=fe(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}E.prototype.read=function(e){h("read",e),e=parseInt(e,10);var t=this._readableState,o=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&((t.highWaterMark!==0?t.length>=t.highWaterMark:t.length>0)||t.ended))return h("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?l(this):$(this),null;if(e=Q(e,t),e===0&&t.ended)return t.length===0&&l(this),null;var u=t.needReadable;h("need readable",u),(t.length===0||t.length-e<t.highWaterMark)&&(u=!0,h("length less than watermark",u)),t.ended||t.reading?(u=!1,h("reading or ended",u)):u&&(h("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Q(o,t)));var I;return e>0?I=i(e,t):I=null,I===null?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),t.length===0&&(t.ended||(t.needReadable=!0),o!==e&&t.ended&&l(this)),I!==null&&this.emit("data",I),I};function oe(e,t){if(h("onEofChunk"),!t.ended){if(t.decoder){var o=t.decoder.end();o&&o.length&&(t.buffer.push(o),t.length+=t.objectMode?1:o.length)}t.ended=!0,t.sync?$(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,Z(e)))}}function $(e){var t=e._readableState;h("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(h("emitReadable",t.flowing),t.emittedReadable=!0,N.nextTick(Z,e))}function Z(e){var t=e._readableState;h("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,a(e)}function F(e,t){t.readingMore||(t.readingMore=!0,N.nextTick(ee,e,t))}function ee(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&t.length===0);){var o=t.length;if(h("maybeReadMore read 0"),e.read(0),o===t.length)break}t.readingMore=!1}E.prototype._read=function(e){R(this,new s("_read()"))},E.prototype.pipe=function(e,t){var o=this,u=this._readableState;switch(u.pipesCount){case 0:u.pipes=e;break;case 1:u.pipes=[u.pipes,e];break;default:u.pipes.push(e);break}u.pipesCount+=1,h("pipe count=%d opts=%j",u.pipesCount,t);var I=(!t||t.end!==!1)&&e!==N.stdout&&e!==N.stderr,O=I?H:z;u.endEmitted?N.nextTick(O):o.once("end",O),e.on("unpipe",C);function C(V,G){h("onunpipe"),V===o&&G&&G.hasUnpiped===!1&&(G.hasUnpiped=!0,Ne())}function H(){h("onend"),e.end()}var re=le(o);e.on("drain",re);var ve=!1;function Ne(){h("cleanup"),e.removeListener("close",he),e.removeListener("finish",ce),e.removeListener("drain",re),e.removeListener("error",se),e.removeListener("unpipe",C),o.removeListener("end",H),o.removeListener("end",z),o.removeListener("data",we),ve=!0,u.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&re()}o.on("data",we);function we(V){h("ondata");var G=e.write(V);h("dest.write",G),G===!1&&((u.pipesCount===1&&u.pipes===e||u.pipesCount>1&&A(u.pipes,e)!==-1)&&!ve&&(h("false write response, pause",u.awaitDrain),u.awaitDrain++),o.pause())}function se(V){h("onerror",V),z(),e.removeListener("error",se),n(e,"error")===0&&R(e,V)}k(e,"error",se);function he(){e.removeListener("finish",ce),z()}e.once("close",he);function ce(){h("onfinish"),e.removeListener("close",he),z()}e.once("finish",ce);function z(){h("unpipe"),o.unpipe(e)}return e.emit("pipe",o),u.flowing||(h("pipe resume"),o.resume()),e};function le(e){return function(){var o=e._readableState;h("pipeOnDrain",o.awaitDrain),o.awaitDrain&&o.awaitDrain--,o.awaitDrain===0&&n(e,"data")&&(o.flowing=!0,a(e))}}E.prototype.unpipe=function(e){var t=this._readableState,o={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,o),this);if(!e){var u=t.pipes,I=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var O=0;O<I;O++)u[O].emit("unpipe",this,{hasUnpiped:!1});return this}var C=A(t.pipes,e);return C===-1?this:(t.pipes.splice(C,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,o),this)},E.prototype.on=function(e,t){var o=f.prototype.on.call(this,e,t),u=this._readableState;return e==="data"?(u.readableListening=this.listenerCount("readable")>0,u.flowing!==!1&&this.resume()):e==="readable"&&!u.endEmitted&&!u.readableListening&&(u.readableListening=u.needReadable=!0,u.flowing=!1,u.emittedReadable=!1,h("on readable",u.length,u.reading),u.length?$(this):u.reading||N.nextTick(U,this)),o},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(e,t){var o=f.prototype.removeListener.call(this,e,t);return e==="readable"&&N.nextTick(te,this),o},E.prototype.removeAllListeners=function(e){var t=f.prototype.removeAllListeners.apply(this,arguments);return(e==="readable"||e===void 0)&&N.nextTick(te,this),t};function te(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function U(e){h("readable nexttick read 0"),e.read(0)}E.prototype.resume=function(){var e=this._readableState;return e.flowing||(h("resume"),e.flowing=!e.readableListening,ue(this,e)),e.paused=!1,this};function ue(e,t){t.resumeScheduled||(t.resumeScheduled=!0,N.nextTick(de,e,t))}function de(e,t){h("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),a(e),t.flowing&&!t.reading&&e.read(0)}E.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function a(e){var t=e._readableState;for(h("flow",t.flowing);t.flowing&&e.read()!==null;);}E.prototype.wrap=function(e){var t=this,o=this._readableState,u=!1;e.on("end",function(){if(h("wrapped end"),o.decoder&&!o.ended){var C=o.decoder.end();C&&C.length&&t.push(C)}t.push(null)}),e.on("data",function(C){if(h("wrapped data"),o.decoder&&(C=o.decoder.write(C)),!(o.objectMode&&C==null)&&!(!o.objectMode&&(!C||!C.length))){var H=t.push(C);H||(u=!0,e.pause())}});for(var I in e)this[I]===void 0&&typeof e[I]=="function"&&(this[I]=function(H){return function(){return e[H].apply(e,arguments)}}(I));for(var O=0;O<M.length;O++)e.on(M[O],this.emit.bind(this,M[O]));return this._read=function(C){h("wrapped _read",C),u&&(u=!1,e.resume())},this},typeof Symbol=="function"&&(E.prototype[Symbol.asyncIterator]=function(){return v===void 0&&(v=Fr()),v(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),E._fromList=i,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function i(e,t){if(t.length===0)return null;var o;return t.objectMode?o=t.buffer.shift():!e||e>=t.length?(t.decoder?o=t.buffer.join(""):t.buffer.length===1?o=t.buffer.first():o=t.buffer.concat(t.length),t.buffer.clear()):o=t.buffer.consume(e,t.decoder),o}function l(e){var t=e._readableState;h("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,N.nextTick(y,t,e))}function y(e,t){if(h("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var o=t._writableState;(!o||o.autoDestroy&&o.finished)&&t.destroy()}}typeof Symbol=="function"&&(E.from=function(e,t){return _===void 0&&(_=Hr()),_(E,e,t)});function A(e,t){for(var o=0,u=e.length;o<u;o++)if(e[o]===t)return o;return-1}return Ve}var Ut=ne,Pe=pe.codes,Vr=Pe.ERR_METHOD_NOT_IMPLEMENTED,Gr=Pe.ERR_MULTIPLE_CALLBACK,Yr=Pe.ERR_TRANSFORM_ALREADY_TRANSFORMING,Kr=Pe.ERR_TRANSFORM_WITH_LENGTH_0,De=ye();J(ne,De);function Xr(r,n){var f=this._transformState;f.transforming=!1;var b=f.writecb;if(b===null)return this.emit("error",new Gr);f.writechunk=null,f.writecb=null,n!=null&&this.push(n),b(r);var d=this._readableState;d.reading=!1,(d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}function ne(r){if(!(this instanceof ne))return new ne(r);De.call(this,r),this._transformState={afterTransform:Xr.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.on("prefinish",zr)}function zr(){var r=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(n,f){wt(r,n,f)}):wt(this,null,null)}ne.prototype.push=function(r,n){return this._transformState.needTransform=!1,De.prototype.push.call(this,r,n)};ne.prototype._transform=function(r,n,f){f(new Vr("_transform()"))};ne.prototype._write=function(r,n,f){var b=this._transformState;if(b.writecb=f,b.writechunk=r,b.writeencoding=n,!b.transforming){var d=this._readableState;(b.needTransform||d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}};ne.prototype._read=function(r){var n=this._transformState;n.writechunk!==null&&!n.transforming?(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform)):n.needTransform=!0};ne.prototype._destroy=function(r,n){De.prototype._destroy.call(this,r,function(f){n(f)})};function wt(r,n,f){if(n)return r.emit("error",n);if(f!=null&&r.push(f),r._writableState.length)throw new Kr;if(r._transformState.transforming)throw new Yr;return r.push(null)}var Jr=Ee,xt=Ut;J(Ee,xt);function Ee(r){if(!(this instanceof Ee))return new Ee(r);xt.call(this,r)}Ee.prototype._transform=function(r,n,f){f(null,r)};var Ge;function Qr(r){var n=!1;return function(){n||(n=!0,r.apply(void 0,arguments))}}var Ft=pe.codes,Zr=Ft.ERR_MISSING_ARGS,ei=Ft.ERR_STREAM_DESTROYED;function Rt(r){if(r)throw r}function ti(r){return r.setHeader&&typeof r.abort=="function"}function ri(r,n,f,b){b=Qr(b);var d=!1;r.on("close",function(){d=!0}),Ge===void 0&&(Ge=Qe),Ge(r,{readable:n,writable:f},function(S){if(S)return b(S);d=!0,b()});var w=!1;return function(S){if(!d&&!w){if(w=!0,ti(r))return r.abort();if(typeof r.destroy=="function")return r.destroy();b(S||new ei("pipe"))}}}function Et(r){r()}function ii(r,n){return r.pipe(n)}function ni(r){return!r.length||typeof r[r.length-1]!="function"?Rt:r.pop()}function ai(){for(var r=arguments.length,n=new Array(r),f=0;f<r;f++)n[f]=arguments[f];var b=ni(n);if(Array.isArray(n[0])&&(n=n[0]),n.length<2)throw new Zr("streams");var d,w=n.map(function(S,P){var h=P<n.length-1,m=P>0;return ri(S,h,m,function(j){d||(d=j),j&&w.forEach(Et),!h&&(w.forEach(Et),b(d))})});return n.reduce(ii)}var fi=ai;(function(r,n){n=r.exports=$t(),n.Stream=n,n.Readable=n,n.Writable=qt(),n.Duplex=ye(),n.Transform=Ut,n.PassThrough=Jr,n.finished=Qe,n.pipeline=fi})(Xe,Xe.exports);var oi=Xe.exports;const di=Ar,si=oi.Readable;export{si as Readable,di as toStream};
